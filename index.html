<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#ffffff">
    <title>Stylistt - Your AI-Powered Wardrobe Atelier</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Manrope:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        "primary": "#000000",
                        "accent-gold": "#C5A059",
                        "soft-gray": "#F8F8F8",
                        "success": "#22C55E",
                        "error": "#EF4444"
                    },
                    fontFamily: {
                        "serif": ["'Playfair Display'", "serif"],
                        "sans": ["Manrope", "sans-serif"]
                    }
                }
            }
        }
    </script>
    <style>
        body { min-height: 100dvh; font-family: 'Manrope', sans-serif; }
        ::-webkit-scrollbar { display: none; }
        * { -ms-overflow-style: none; scrollbar-width: none; }
        .brand-title { font-family: 'Playfair Display', serif; letter-spacing: -0.01em; }
        .brand-logo { font-family: 'Playfair Display', serif; letter-spacing: -0.02em; }
        .magazine-shadow { box-shadow: 0 10px 40px -15px rgba(0,0,0,0.08); }
        .camera-shadow { box-shadow: 0 8px 25px -5px rgba(0,0,0,0.3); }
        .nav-shadow { box-shadow: 0 -4px 20px -5px rgba(0,0,0,0.05); }
        .card-shadow { box-shadow: 0 4px 20px -5px rgba(0,0,0,0.1); }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        @keyframes slideDown { from { transform: translateY(-100%); } to { transform: translateY(0); } }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
        .animate-fade-in { animation: fadeIn 0.5s ease-out; }
        .animate-fade-in-up { animation: fadeInUp 0.6s ease-out; }
        .animate-slide-up { animation: slideUp 0.3s ease-out; }
        .animate-pulse { animation: pulse 2s infinite; }
        .animate-spin { animation: spin 1s linear infinite; }
        .animate-shake { animation: shake 0.3s ease-in-out; }
        .screen-enter { animation: fadeIn 0.3s ease-out; }
        .heart-btn.active span { font-variation-settings: 'FILL' 1; color: #C5A059; }
        .material-symbols-outlined { font-variation-settings: 'FILL' 0, 'wght' 300, 'GRAD' 0, 'opsz' 24; }
        .material-symbols-outlined.filled { font-variation-settings: 'FILL' 1; }
        .bottom-nav { position: fixed; bottom: 0; left: 0; right: 0; max-width: 430px; margin: 0 auto; z-index: 50; }
        .quiz-option { transition: all 0.3s ease; border: 2px solid transparent; }
        .quiz-option.selected { border-color: black; }
        .palette-circle { border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .modal-backdrop { background: rgba(0,0,0,0.5); backdrop-filter: blur(4px); }
        .toast { animation: slideDown 0.3s ease-out, fadeIn 0.3s ease-out; }
        .input-field { transition: border-color 0.2s, box-shadow 0.2s; }
        .input-field:focus { border-color: black; box-shadow: 0 0 0 2px rgba(0,0,0,0.1); outline: none; }
        .input-field.error { border-color: #EF4444; }
        .btn-loading { position: relative; color: transparent !important; }
        .btn-loading::after { content: ''; position: absolute; width: 20px; height: 20px; top: 50%; left: 50%; margin: -10px 0 0 -10px; border: 2px solid transparent; border-top-color: white; border-radius: 50%; animation: spin 0.8s linear infinite; }
    </style>
</head>
<body class="bg-white">
    <div id="app" class="relative flex min-h-screen w-full flex-col max-w-[430px] mx-auto overflow-x-hidden bg-white">
        <div id="screen-container"></div>
        <div id="modal-container"></div>
        <div id="toast-container" class="fixed top-0 left-0 right-0 max-w-[430px] mx-auto z-[100] p-4"></div>
    </div>

<script>
// ============ LOCAL STORAGE ============
const Storage = {
    keys: {
        USER: 'stylistt_user',
        CLOSET: 'stylistt_closet',
        FAVORITES: 'stylistt_favorites',
        STYLE_DNA: 'stylistt_style_dna',
        SCANS: 'stylistt_scans',
        VISITS: 'stylistt_visits',
        CLIENTS: 'stylistt_clients',
        ORGANIZERS: 'stylistt_organizers'
    },

    save(key, data) {
        try {
            localStorage.setItem(key, JSON.stringify(data));
            return true;
        } catch (e) {
            console.error('Storage save error:', e);
            return false;
        }
    },

    load(key, defaultValue = null) {
        try {
            const data = localStorage.getItem(key);
            return data ? JSON.parse(data) : defaultValue;
        } catch (e) {
            console.error('Storage load error:', e);
            return defaultValue;
        }
    },

    remove(key) {
        localStorage.removeItem(key);
    },

    clear() {
        Object.values(this.keys).forEach(key => this.remove(key));
    }
};

// ============ TOAST NOTIFICATIONS ============
const Toast = {
    show(message, type = 'info', duration = 3000) {
        const container = document.getElementById('toast-container');
        const colors = {
            success: 'bg-green-500',
            error: 'bg-red-500',
            info: 'bg-black',
            warning: 'bg-yellow-500'
        };
        const icons = {
            success: 'check_circle',
            error: 'error',
            info: 'info',
            warning: 'warning'
        };

        const toast = document.createElement('div');
        toast.className = `toast flex items-center gap-3 ${colors[type]} text-white px-4 py-3 rounded-lg shadow-lg mb-2`;
        toast.innerHTML = `
            <span class="material-symbols-outlined text-[20px]">${icons[type]}</span>
            <span class="text-sm font-medium">${message}</span>
        `;
        container.appendChild(toast);

        setTimeout(() => {
            toast.style.opacity = '0';
            toast.style.transform = 'translateY(-20px)';
            toast.style.transition = 'all 0.3s ease';
            setTimeout(() => toast.remove(), 300);
        }, duration);
    }
};

// ============ MODAL SYSTEM ============
const Modal = {
    show(content, options = {}) {
        const { closable = true, onClose = null } = options;
        const container = document.getElementById('modal-container');
        container.innerHTML = `
            <div class="fixed inset-0 z-[90] modal-backdrop flex items-end justify-center animate-fade-in" onclick="${closable ? 'Modal.hide()' : ''}">
                <div class="bg-white w-full max-w-[430px] rounded-t-3xl animate-slide-up" onclick="event.stopPropagation()">
                    ${closable ? `
                        <div class="flex justify-center pt-4">
                            <div class="w-12 h-1 bg-gray-300 rounded-full"></div>
                        </div>
                    ` : ''}
                    <div class="p-6">${content}</div>
                </div>
            </div>
        `;
        this._onClose = onClose;
    },

    hide() {
        const container = document.getElementById('modal-container');
        container.innerHTML = '';
        if (this._onClose) this._onClose();
    }
};

// ============ ROUTER ============
const Router = {
    routes: {},
    register(path, handler) { this.routes[path] = handler; },
    navigate(path) { window.location.hash = path; },
    getRoute() { return window.location.hash.slice(1) || '/welcome'; },

    parseParams(pattern, route) {
        const pp = pattern.split('/'), rp = route.split('/'), params = {};
        if (pp.length !== rp.length) return null;
        for (let i = 0; i < pp.length; i++) {
            if (pp[i].startsWith(':')) params[pp[i].slice(1)] = rp[i];
            else if (pp[i] !== rp[i]) return null;
        }
        return params;
    },

    findHandler(route) {
        if (this.routes[route]) return { handler: this.routes[route], params: {} };
        for (const p in this.routes) {
            if (p.includes(':')) {
                const params = this.parseParams(p, route);
                if (params) return { handler: this.routes[p], params };
            }
        }
        return null;
    },

    handleRouteChange() {
        const route = this.getRoute();
        const match = this.findHandler(route);
        if (match) {
            const container = document.getElementById('screen-container');
            container.innerHTML = '';
            container.className = 'screen-enter';
            match.handler(match.params);
            this.updateNav(route);
        } else {
            this.navigate('/welcome');
        }
    },

    updateNav(route) {
        const map = {'/daily-edit':'home','/ai-outfit':'styling','/scan':'camera','/closet':'closet','/profile':'profile'};
        document.querySelectorAll('.nav-item').forEach(item => {
            const id = item.dataset.nav;
            if (map[route] === id) {
                item.classList.add('text-black');
                item.classList.remove('text-gray-400');
            } else if (id !== 'camera') {
                item.classList.remove('text-black');
                item.classList.add('text-gray-400');
            }
        });
    },

    init() {
        window.addEventListener('hashchange', () => this.handleRouteChange());
        window.addEventListener('load', () => this.handleRouteChange());
    }
};

// ============ APP STATE ============
const App = {
    state: {
        isLoggedIn: false,
        user: null,
        currentApp: 'stylistt', // 'stylistt' | 'organizerr'
        styleDNA: { step: 1, totalSteps: 3, selections: {}, completed: false },
        favorites: new Set(),
        closetFilter: 'All Items',
        closetItems: [],
        scans: [],
        visits: [],
        clients: [], // For organizers
        organizers: [] // For clients - mock data of connected organizers
    },

    init() {
        // Load persisted data
        const savedUser = Storage.load(Storage.keys.USER);
        if (savedUser) {
            this.state.isLoggedIn = true;
            this.state.user = savedUser;
        }

        const savedFavorites = Storage.load(Storage.keys.FAVORITES, []);
        this.state.favorites = new Set(savedFavorites);

        const savedStyleDNA = Storage.load(Storage.keys.STYLE_DNA);
        if (savedStyleDNA) this.state.styleDNA = savedStyleDNA;

        const savedCloset = Storage.load(Storage.keys.CLOSET, []);
        this.state.closetItems = savedCloset;

        const savedScans = Storage.load(Storage.keys.SCANS, []);
        this.state.scans = savedScans;

        const savedVisits = Storage.load(Storage.keys.VISITS, []);
        this.state.visits = savedVisits;

        const savedClients = Storage.load(Storage.keys.CLIENTS, []);
        this.state.clients = savedClients;

        const savedOrganizers = Storage.load(Storage.keys.ORGANIZERS, []);
        this.state.organizers = savedOrganizers;
    },

    data: {
        lookbooks: [
            { id: 'weekend-chic', title: 'Weekend Chic', description: 'A sophisticated blend of textures: soft cream cashmere paired with fluid silk wide-leg trousers.', image: 'https://lh3.googleusercontent.com/aida-public/AB6AXuCS0VHRB4CvprlzT_EiRFPsPIpHBBGD0r36xV3bjShS9mD-6zaG4u55R5BzIkenJGNnLqZz4cly9CmtVOZkALnTSzkwHEht2Xinzm6Yuo6i_g5SJ0Bo0ZL_s_KHTQ5GejvxM9JTlLh1i3J_VUyCRdlxxWj95qlOFy1B7VBYk-4Zn1QCfq_tAwimHzmaAdj6QpyIfSPsJP033CXthIQuW-UZnfOrABv2OTeUJpHwgncp-ulXWbu9-k20TIRBv87rkkdOf4mOpRTF4efa' },
            { id: 'office-minimalist', title: 'Office Minimalist', description: 'Commanding presence through simplicity with a sharp-shouldered blazer over pleated midi skirt.', image: 'https://lh3.googleusercontent.com/aida-public/AB6AXuAiPaLAe3nAW1rJwNgkmaZ0hGIehH201D_KtzNw623roCMaO8VSI44MIc-e8AT-d1RMKccGI8P9RqjaXLvr2Ya8RzaNgLxilgyJfbjxtoHSgphZ4hqsLF9-erqKPmeou1qQ6XAWmVOTQeIJpoFArZIrC2yUpft5QNudI6nZ2J5a6buqyY6JSOB_tEOVbvDFaBwpqe7dOujDt9OzO-3OZW9qwYAIUTM9rdfjrbWlVhMUxvdMLxes7qahvLxso-HxvLebAJrl2mBmgAuD' },
            { id: 'evening-editorial', title: 'Evening Editorial', description: 'Late-night elegance reimagined with a bias-cut silk slip dress and structured leather boots.', image: 'https://lh3.googleusercontent.com/aida-public/AB6AXuCQymJmio_BDaL8KqgHlPaZb9FkLOqJ9hdVs8cLzSWPxlBKLMyhtQStzeAfQeJ8E4HQZ44j-9HgExkaa8ceuefb7RyL61LYTkxyY4x_WBS3b0aMUHYKt9c5CTxgGWs8psZTkjjpNGnRQU7smXAgMXEJt_ijd5benNMdkJ20Wtdp0bPHF6-jRjGeeZQiuuWabt9C8S91eCLLw4dxj1FVOm5-1hCIBBsD4qCv2rDAUPMOhIWR61is8N39rvdJjNtGw6gdGswwv5OYBNMB' }
        ],
        categories: ['All Items', 'Tops', 'Bottoms', 'Outerwear', 'Dresses', 'Shoes', 'Accessories'],
        palette: [
            { color: '#1a1a1a', percentage: 32, name: 'Noir' },
            { color: '#F3EFE0', percentage: 24, name: 'Ecru' },
            { color: '#1F2937', percentage: 18, name: 'Navy' },
            { color: '#C27A65', percentage: 12, name: 'Clay' }
        ],
        quizSteps: [
            {
                id: 1,
                title: 'Which aesthetic speaks to you?',
                subtitle: 'Select the style that best represents your fashion identity.',
                type: 'image-grid',
                options: [
                    { id: 'minimalist', label: 'Minimalist', desc: 'Clean lines, neutral tones', image: 'https://lh3.googleusercontent.com/aida-public/AB6AXuA3O7gaqatTnRvfcwJCa-iBXsTQ6WL4qagsSeAohlyuoCqjloY2TfWy9mxeAqunJhqMZsKqFWjPRyRvanPBQ3i2mSZunugBzHYwagiMTK2bqjFNS320iEJnZLqjAtDuVNdjQspslHM-jnysnWM6F1lR5IGQf8eeuwBu2EcxzzZE02HYM9VYAcF7X2kkpMAwNfrVXcC4-2mZ-BqaEZ5Go-jdkNiyvIt9pQAfSbXT8IQMrD7UMUDTI0-VI67nXTlhgOynleu9Ew0FVALV' },
                    { id: 'romantic', label: 'Romantic', desc: 'Soft, feminine details', image: 'https://lh3.googleusercontent.com/aida-public/AB6AXuBG1mpqFEr3sgDhMFpMao9SudPe3m8ijh_edHFHHQY_sq8kN4FPtbAXOxZt_UTnDbTfMM-IsBNxnBt6B05_PQTpm00oAOMlnPyOYLZM19qXGQFiGC3qhIEFrgf30dFO1-zERDxODxvctGuM98sUVt2ksogNdH15CWBAVx8ghXn9l1hMMHhdesEmrR8ZegZU1m53EBfdmp7ckYwFCETzG-VAIPwnyjSeKS45vClDVLe5e2XvKVeJ5MgC_OHpqWLO3NuOL94CWiT3eWMA' },
                    { id: 'edgy', label: 'Edgy', desc: 'Bold, unconventional', image: 'https://lh3.googleusercontent.com/aida-public/AB6AXuBfnrT_sPeWCRHzRGWz_pRjP7HUIpOpgPt_JKYl28GvyaVjx1n9Cl0TOQdsx5uhiul0oKXPviHFPvzZqYbkwMLiYhWVpqWpQQ6UHC_SHfoUq1J7FomePHy25EkefX3lU5W5ylQ7Wg2VbjOu0Qln0FuHYwMoIV0fraB1Rj7akYT71DqBC2VZnFAmYgHTt-zM2-uPc0Wjt4Rw8mKNkLp7S5AQO5MVUDihDCkA3GqJwG_SeXV4uXpOEVNG7CL8puVSvjHpbxuZFrKkzxUA' },
                    { id: 'classic', label: 'Classic', desc: 'Timeless elegance', image: 'https://lh3.googleusercontent.com/aida-public/AB6AXuAeCCNAwsgQrBeW7Vwzm2Wf9NqsYWQvvIMwW0ANOb_F-FnZN6G0szyTS6E0kegkJ1tQY7eSwy_2fd40APNxH3qNUzbG_jhPcfrXPrBlMux2xJ-dgBxn_TwSchLS3HzOgsOTvQyheQ23PbSfU-G-Sz7KD2uVYqCBsiMtks2wBX3hRMJmuVibURD2zhejC1G2_XA16ppE-p9VF9pCpImbMBa3x6hn824d2mD5FfKcFGzuiA0m6dZg7pCvANiLhQCMsodcIlQ2yoh2A6er' }
                ]
            },
            {
                id: 2,
                title: 'What colors define your wardrobe?',
                subtitle: 'Choose the palette you\'re most drawn to.',
                type: 'color-palette',
                options: [
                    { id: 'neutrals', label: 'Neutrals', colors: ['#1a1a1a', '#F5F5DC', '#D2B48C', '#808080'] },
                    { id: 'earth-tones', label: 'Earth Tones', colors: ['#8B4513', '#556B2F', '#CD853F', '#DEB887'] },
                    { id: 'bold-brights', label: 'Bold & Bright', colors: ['#DC143C', '#4169E1', '#FFD700', '#32CD32'] },
                    { id: 'pastels', label: 'Soft Pastels', colors: ['#FFB6C1', '#E6E6FA', '#98FB98', '#F0E68C'] }
                ]
            },
            {
                id: 3,
                title: 'How would you describe your lifestyle?',
                subtitle: 'This helps us understand your daily dressing needs.',
                type: 'text-cards',
                options: [
                    { id: 'corporate', label: 'Corporate Professional', icon: 'business_center', desc: 'Meetings, presentations, office culture' },
                    { id: 'creative', label: 'Creative & Freelance', icon: 'palette', desc: 'Flexible schedule, self-expression matters' },
                    { id: 'active', label: 'Active & On-the-Go', icon: 'directions_run', desc: 'Always moving, comfort is key' },
                    { id: 'social', label: 'Social Butterfly', icon: 'celebration', desc: 'Events, dinners, always camera-ready' }
                ]
            }
        ],
        occasions: ['Parisian Dinner', 'Sunday Brunch', 'Art Gallery', 'Business Meeting', 'Date Night', 'Weekend Casual'],

        // Free tier limit
        freeItemLimit: 5,

        // Subscription tiers - reframed around transformation
        subscriptionTiers: [
            {
                id: 'free',
                name: 'Free',
                price: 0,
                priceLabel: 'Free',
                visits: 0,
                aiLooksPerDay: 3,
                lookbooksPerDay: 5,
                itemLimit: 5,
                features: ['Scan up to 5 items yourself', '3 AI outfits per day', 'Browse lookbooks', 'Basic styling']
            },
            {
                id: 'transform',
                name: 'Transform',
                price: 500,
                priceLabel: '$500',
                visits: 1,
                aiLooksPerDay: -1,
                lookbooksPerDay: -1,
                itemLimit: -1,
                features: ['1 pro visit - full closet scan', 'Unlimited AI outfits', 'Unlimited lookbooks', 'Physical closet organization']
            },
            {
                id: 'maintain',
                name: 'Maintain',
                price: 1200,
                priceLabel: '$1,200/year',
                visits: 2,
                aiLooksPerDay: -1,
                lookbooksPerDay: -1,
                itemLimit: -1,
                popular: true,
                features: ['2 visits per year', 'Seasonal wardrobe refresh', 'Unlimited AI outfits', 'Priority booking']
            },
            {
                id: 'concierge',
                name: 'Concierge',
                price: 2400,
                priceLabel: '$2,400/year',
                visits: 4,
                aiLooksPerDay: -1,
                lookbooksPerDay: -1,
                itemLimit: -1,
                features: ['4 quarterly visits', 'Dedicated personal organizer', 'Unlimited everything', 'White glove service']
            }
        ],

        // Mock organizers for demo
        mockOrganizers: [
            { id: 'org-1', name: 'Sarah Mitchell', initials: 'SM', specialty: 'Minimalist Wardrobes', rating: 4.9, reviews: 127, image: null },
            { id: 'org-2', name: 'James Chen', initials: 'JC', specialty: 'Executive Styling', rating: 4.8, reviews: 89, image: null },
            { id: 'org-3', name: 'Elena Rodriguez', initials: 'ER', specialty: 'Color Analysis', rating: 5.0, reviews: 156, image: null }
        ]
    },

    // Auth methods
    login(email, password, userType = 'client') {
        // Simulate login
        if (!email || !password) {
            Toast.show('Please fill in all fields', 'error');
            return false;
        }

        const user = {
            email,
            name: email.split('@')[0],
            initials: email.substring(0, 2).toUpperCase(),
            userType, // 'client' or 'organizer'
            archetype: 'Parisian Chic',
            piecesScanned: 0,
            looksCreated: 0,
            totalItems: 0,
            subscription: {
                tier: 'free',
                startDate: null,
                expiresAt: null,
                visitsRemaining: 0,
                aiLooksToday: 0,
                lookbooksToday: 0,
                lastResetDate: new Date().toDateString()
            },
            inviteCode: this.generateInviteCode(),
            connectedOrganizers: [],
            connectedClients: [],
            createdAt: new Date().toISOString()
        };

        this.state.isLoggedIn = true;
        this.state.user = user;
        Storage.save(Storage.keys.USER, user);
        Toast.show('Welcome back!', 'success');
        return true;
    },

    signup(name, email, password, userType = 'client') {
        if (!name || !email || !password) {
            Toast.show('Please fill in all fields', 'error');
            return false;
        }

        if (password.length < 6) {
            Toast.show('Password must be at least 6 characters', 'error');
            return false;
        }

        const user = {
            email,
            name,
            initials: name.substring(0, 2).toUpperCase(),
            userType, // 'client' or 'organizer'
            archetype: null,
            piecesScanned: 0,
            looksCreated: 0,
            totalItems: 0,
            subscription: {
                tier: 'free',
                startDate: null,
                expiresAt: null,
                visitsRemaining: 0,
                aiLooksToday: 0,
                lookbooksToday: 0,
                lastResetDate: new Date().toDateString()
            },
            inviteCode: this.generateInviteCode(),
            connectedOrganizers: [],
            connectedClients: [],
            createdAt: new Date().toISOString()
        };

        this.state.isLoggedIn = true;
        this.state.user = user;
        this.state.styleDNA = { step: 1, totalSteps: 3, selections: {}, completed: false };
        Storage.save(Storage.keys.USER, user);
        Toast.show('Account created successfully!', 'success');
        return true;
    },

    generateInviteCode() {
        return Math.random().toString(36).substring(2, 8).toUpperCase();
    },

    logout() {
        this.state.isLoggedIn = false;
        this.state.user = null;
        Storage.remove(Storage.keys.USER);
        Toast.show('Logged out successfully', 'info');
        Router.navigate('/welcome');
    },

    updateUser(updates) {
        if (this.state.user) {
            this.state.user = { ...this.state.user, ...updates };
            Storage.save(Storage.keys.USER, this.state.user);
        }
    },

    // App switching
    switchApp(app) {
        this.state.currentApp = app;
        if (app === 'stylistt') {
            Router.navigate('/daily-edit');
        } else if (app === 'organizerr') {
            if (this.state.user?.userType === 'organizer') {
                Router.navigate('/organizer');
            } else {
                Router.navigate('/organizerr');
            }
        }
    },

    // Subscription methods
    subscribe(tierId) {
        const tier = this.data.subscriptionTiers.find(t => t.id === tierId);
        if (!tier) return false;

        const startDate = new Date();
        const expiresAt = new Date();
        expiresAt.setFullYear(expiresAt.getFullYear() + 1);

        this.updateUser({
            subscription: {
                tier: tierId,
                startDate: startDate.toISOString(),
                expiresAt: expiresAt.toISOString(),
                visitsRemaining: tier.visits,
                aiLooksToday: 0,
                lookbooksToday: 0,
                lastResetDate: new Date().toDateString()
            }
        });

        Toast.show(`Subscribed to ${tier.name}!`, 'success');
        return true;
    },

    hasSubscription() {
        return this.state.user?.subscription?.tier && this.state.user.subscription.tier !== 'none';
    },

    getSubscriptionTier() {
        if (!this.hasSubscription()) return null;
        return this.data.subscriptionTiers.find(t => t.id === this.state.user.subscription.tier);
    },

    canUseAiLooks() {
        const tier = this.getSubscriptionTier();
        if (!tier) return false;
        if (tier.aiLooksPerDay === -1) return true; // unlimited

        // Check if we need to reset daily counters
        this.checkDailyReset();
        return this.state.user.subscription.aiLooksToday < tier.aiLooksPerDay;
    },

    canViewLookbooks() {
        const tier = this.getSubscriptionTier();
        if (!tier) return false;
        if (tier.lookbooksPerDay === -1) return true; // unlimited

        this.checkDailyReset();
        return this.state.user.subscription.lookbooksToday < tier.lookbooksPerDay;
    },

    useAiLook() {
        if (!this.canUseAiLooks()) {
            Toast.show('Daily AI look limit reached. Upgrade for unlimited!', 'warning');
            return false;
        }
        const sub = { ...this.state.user.subscription };
        sub.aiLooksToday++;
        this.updateUser({ subscription: sub });
        return true;
    },

    viewLookbook() {
        if (!this.canViewLookbooks()) {
            Toast.show('Daily lookbook limit reached. Upgrade for unlimited!', 'warning');
            return false;
        }
        const sub = { ...this.state.user.subscription };
        sub.lookbooksToday++;
        this.updateUser({ subscription: sub });
        return true;
    },

    checkDailyReset() {
        const today = new Date().toDateString();
        if (this.state.user?.subscription?.lastResetDate !== today) {
            const sub = { ...this.state.user.subscription };
            sub.aiLooksToday = 0;
            sub.lookbooksToday = 0;
            sub.lastResetDate = today;
            this.updateUser({ subscription: sub });
        }
    },

    getRemainingLooks() {
        const tier = this.getSubscriptionTier();
        if (!tier) return 0;
        if (tier.aiLooksPerDay === -1) return 'âˆž';
        this.checkDailyReset();
        return Math.max(0, tier.aiLooksPerDay - (this.state.user.subscription.aiLooksToday || 0));
    },

    // Visit management
    bookVisit(organizerId, date, notes = '') {
        const visit = {
            id: Date.now().toString(),
            clientId: this.state.user?.email,
            organizerId,
            scheduledDate: date,
            status: 'scheduled',
            notes,
            createdAt: new Date().toISOString()
        };
        this.state.visits.push(visit);
        Storage.save(Storage.keys.VISITS, this.state.visits);

        // Decrement remaining visits
        if (this.state.user?.subscription?.visitsRemaining > 0) {
            const sub = { ...this.state.user.subscription };
            sub.visitsRemaining--;
            this.updateUser({ subscription: sub });
        }

        Toast.show('Visit booked successfully!', 'success');
        return visit;
    },

    getClientVisits() {
        return this.state.visits.filter(v => v.clientId === this.state.user?.email);
    },

    getOrganizerVisits() {
        return this.state.visits.filter(v => v.organizerId === this.state.user?.email);
    },

    // Client-Organizer connection
    connectOrganizer(organizerCode) {
        // In real app, this would verify the code and connect
        const mockOrganizer = this.data.mockOrganizers[0];
        const connected = [...(this.state.user?.connectedOrganizers || [])];
        if (!connected.find(o => o.id === mockOrganizer.id)) {
            connected.push(mockOrganizer);
            this.updateUser({ connectedOrganizers: connected });
            Toast.show(`Connected with ${mockOrganizer.name}!`, 'success');
            return true;
        }
        Toast.show('Already connected with this organizer', 'info');
        return false;
    },

    // For organizers: add client by code
    addClientByCode(clientCode) {
        // Mock: pretend we found a client
        const mockClient = {
            id: 'client-' + Date.now(),
            name: 'Demo Client',
            email: 'demo@example.com',
            initials: 'DC',
            subscription: { tier: 'premium' },
            closetItems: []
        };
        const clients = [...(this.state.user?.connectedClients || [])];
        clients.push(mockClient);
        this.updateUser({ connectedClients: clients });
        Toast.show('Client added successfully!', 'success');
        return mockClient;
    },

    // For organizers: add item to client's closet
    addItemToClientCloset(clientId, item) {
        // In real app, this would update the client's closet on server
        const newItem = {
            id: Date.now().toString(),
            ...item,
            addedBy: this.state.user?.name || 'Organizer',
            addedAt: new Date().toISOString()
        };
        Toast.show('Item added to client closet!', 'success');
        return newItem;
    },

    toggleFavorite(id) {
        if (this.state.favorites.has(id)) {
            this.state.favorites.delete(id);
            Toast.show('Removed from favorites', 'info');
        } else {
            this.state.favorites.add(id);
            Toast.show('Added to favorites', 'success');
        }
        Storage.save(Storage.keys.FAVORITES, [...this.state.favorites]);
        Router.handleRouteChange();
    },

    isFavorite(id) { return this.state.favorites.has(id); },

    setClosetFilter(f) { this.state.closetFilter = f; Router.handleRouteChange(); },

    selectStyleOption(step, id) {
        const quizStep = this.data.quizSteps.find(s => s.id === step);

        if (quizStep && quizStep.multiSelect) {
            // Multi-select: toggle the option
            if (!Array.isArray(this.state.styleDNA.selections[step])) {
                this.state.styleDNA.selections[step] = [];
            }
            const idx = this.state.styleDNA.selections[step].indexOf(id);
            if (idx > -1) {
                this.state.styleDNA.selections[step].splice(idx, 1);
            } else {
                this.state.styleDNA.selections[step].push(id);
            }
        } else {
            // Single select
            this.state.styleDNA.selections[step] = id;
        }

        Storage.save(Storage.keys.STYLE_DNA, this.state.styleDNA);

        // Update UI
        document.querySelectorAll('.quiz-option').forEach(el => {
            const optionId = el.closest('[data-option]')?.dataset.option;
            if (quizStep && quizStep.multiSelect) {
                const isSelected = this.state.styleDNA.selections[step]?.includes(optionId);
                el.classList.toggle('selected', isSelected);
            } else {
                el.classList.toggle('selected', optionId === id);
            }
        });
    },

    nextStyleDNAStep() {
        if (this.state.styleDNA.step < 3) {
            this.state.styleDNA.step++;
            Storage.save(Storage.keys.STYLE_DNA, this.state.styleDNA);
            Router.handleRouteChange();
        } else {
            this.completeStyleDNA();
        }
    },

    prevStyleDNAStep() {
        if (this.state.styleDNA.step > 1) {
            this.state.styleDNA.step--;
            Storage.save(Storage.keys.STYLE_DNA, this.state.styleDNA);
            Router.handleRouteChange();
        } else {
            Router.navigate('/welcome');
        }
    },

    completeStyleDNA() {
        this.state.styleDNA.completed = true;

        // Generate archetype based on quiz answers
        const sel = this.state.styleDNA.selections;
        const aesthetic = sel[1] || 'classic';
        const palette = sel[2] || 'neutrals';
        const lifestyle = sel[3] || 'creative';

        // Create archetype name from selections
        const aestheticNames = { minimalist: 'Modern Minimalist', romantic: 'Soft Romantic', edgy: 'Bold Avant-Garde', classic: 'Timeless Classic' };
        const paletteAdjectives = { neutrals: 'Neutral', 'earth-tones': 'Earthy', 'bold-brights': 'Vibrant', pastels: 'Soft' };

        const archetype = `${paletteAdjectives[palette] || 'Refined'} ${aestheticNames[aesthetic] || 'Classic'}`;

        this.updateUser({
            archetype,
            styleProfile: {
                aesthetic,
                palette,
                lifestyle
            }
        });

        Storage.save(Storage.keys.STYLE_DNA, this.state.styleDNA);
        Toast.show('Style DNA complete!', 'success');
        Router.navigate('/get-started');
    },

    addToCloset(item) {
        // Check free tier limit
        const tier = this.state.user?.subscription?.tier || 'free';
        const tierData = this.data.subscriptionTiers.find(t => t.id === tier);
        const itemLimit = tierData?.itemLimit || this.data.freeItemLimit;

        if (itemLimit > 0 && this.state.closetItems.length >= itemLimit) {
            // Show upgrade modal instead of blocking
            Modal.show({
                title: 'Free Limit Reached',
                message: `You've scanned ${itemLimit} items - that's the free tier limit.\n\nImagine AI styling with your ENTIRE wardrobe.`,
                primaryAction: { label: 'Transform My Closet', action: () => { Modal.hide(); Router.navigate('/transform'); }},
                secondaryAction: { label: 'Maybe Later', action: () => Modal.hide() }
            });
            return null;
        }

        const newItem = {
            id: Date.now().toString(),
            ...item,
            addedAt: new Date().toISOString()
        };
        this.state.closetItems.push(newItem);
        Storage.save(Storage.keys.CLOSET, this.state.closetItems);
        this.updateUser({ totalItems: this.state.closetItems.length, piecesScanned: (this.state.user?.piecesScanned || 0) + 1 });
        Toast.show('Item added to closet!', 'success');
        return newItem;
    },

    removeFromCloset(id) {
        this.state.closetItems = this.state.closetItems.filter(item => item.id !== id);
        Storage.save(Storage.keys.CLOSET, this.state.closetItems);
        this.updateUser({ totalItems: this.state.closetItems.length });
        Toast.show('Item removed', 'info');
    }
};

// ============ COMPONENTS ============
const Components = {
    bottomNav(active) {
        const items = [
            { id: 'home', icon: 'home', route: '/daily-edit' },
            { id: 'styling', icon: 'auto_fix_high', route: '/ai-outfit' },
            { id: 'camera', icon: 'photo_camera', route: '/scan', center: true },
            { id: 'closet', icon: 'checkroom', route: '/closet' },
            { id: 'profile', icon: 'person', route: '/profile' }
        ];
        return `
            <nav class="bottom-nav bg-white/95 backdrop-blur-xl border-t border-gray-100 px-8 py-4 flex justify-between items-center nav-shadow">
                ${items.map(i => i.center ? `
                    <button onclick="Router.navigate('${i.route}')" class="nav-item" data-nav="${i.id}">
                        <div class="w-14 h-14 bg-black text-white rounded-full flex items-center justify-center -mt-10 camera-shadow active:scale-95 transition-transform">
                            <span class="material-symbols-outlined text-[26px]">${i.icon}</span>
                        </div>
                    </button>
                ` : `
                    <button onclick="Router.navigate('${i.route}')" class="nav-item ${active === i.id ? 'text-black' : 'text-gray-400'} active:scale-90 transition-transform" data-nav="${i.id}">
                        <span class="material-symbols-outlined text-[28px] ${active === i.id ? 'filled' : ''}">${i.icon}</span>
                    </button>
                `).join('')}
            </nav>
        `;
    },

    header(opts = {}) {
        const { subtitle = '', showBack = false, rightAction = 'shop' } = opts;
        const rightButtons = {
            shop: `<button onclick="Router.navigate('/shop')" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">shopping_bag</span></button>`,
            settings: `<button onclick="Router.navigate('/settings')" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">settings</span></button>`,
            none: '<div class="w-6"></div>'
        };
        return `
            <header class="sticky top-0 z-50 flex items-center bg-white/95 backdrop-blur-md pt-12 pb-4 px-6 justify-between border-b border-gray-50">
                <div class="w-10 flex justify-start">
                    ${showBack ? `<button onclick="history.back()" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">arrow_back</span></button>`
                    : `<button onclick="Screens.showMenu()" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">menu</span></button>`}
                </div>
                <div class="flex-1 text-center">
                    <h1 class="brand-logo text-2xl font-medium">Stylistt</h1>
                    ${subtitle ? `<p class="text-[10px] uppercase tracking-[0.3em] text-gray-400">${subtitle}</p>` : ''}
                </div>
                <div class="w-10 flex justify-end">
                    ${rightButtons[rightAction] || rightButtons.shop}
                </div>
            </header>
        `;
    },

    inputField(opts) {
        const { type = 'text', name, placeholder, icon, value = '' } = opts;
        return `
            <div class="relative">
                ${icon ? `<span class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-[20px]">${icon}</span>` : ''}
                <input
                    type="${type}"
                    name="${name}"
                    placeholder="${placeholder}"
                    value="${value}"
                    class="input-field w-full ${icon ? 'pl-12' : 'pl-4'} pr-4 py-4 border border-gray-200 text-sm focus:border-black transition-colors"
                >
            </div>
        `;
    },

    button(text, opts = {}) {
        const { onclick = '', variant = 'primary', icon = '', loading = false, fullWidth = true } = opts;
        const variants = {
            primary: 'bg-black text-white',
            secondary: 'border border-black text-black hover:bg-black hover:text-white',
            gold: 'bg-accent-gold text-white',
            ghost: 'text-gray-500'
        };
        return `
            <button
                onclick="${onclick}"
                class="${variants[variant]} ${fullWidth ? 'w-full' : ''} py-4 text-[11px] font-bold uppercase tracking-[0.2em] flex items-center justify-center gap-2 active:scale-[0.98] transition-all ${loading ? 'btn-loading' : ''}"
                ${loading ? 'disabled' : ''}
            >
                ${icon ? `<span class="material-symbols-outlined text-[18px]">${icon}</span>` : ''}
                <span>${text}</span>
            </button>
        `;
    },

    closetItem(item) {
        return `
            <div class="animate-fade-in-up cursor-pointer" onclick="Router.navigate('/item/${item.id}')">
                <div class="relative bg-soft-gray aspect-square mb-3 overflow-hidden group">
                    ${item.image ?
                        `<img src="${item.image}" alt="${item.name}" class="w-full h-full object-cover group-hover:scale-105 transition-transform">` :
                        `<div class="w-full h-full flex items-center justify-center"><span class="material-symbols-outlined text-[48px] text-gray-300">checkroom</span></div>`
                    }
                    <button onclick="event.stopPropagation(); App.removeFromCloset('${item.id}')" class="absolute top-2 right-2 w-8 h-8 bg-white/90 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
                        <span class="material-symbols-outlined text-[16px]">close</span>
                    </button>
                </div>
                <p class="text-[10px] text-gray-400 uppercase tracking-wider">${item.brand || 'Stylistt'}</p>
                <p class="text-xs font-medium uppercase tracking-wider truncate">${item.name}</p>
            </div>
        `;
    },

    // App switcher tabs (Stylistt / Organizerr)
    appSwitcher() {
        const current = App.state.currentApp;
        return `
            <div class="fixed bottom-0 left-0 right-0 max-w-[430px] mx-auto z-[60] bg-white border-t border-gray-200">
                <div class="flex">
                    <button onclick="App.switchApp('stylistt')" class="flex-1 py-3 flex items-center justify-center gap-2 ${current === 'stylistt' ? 'bg-black text-white' : 'bg-white text-black border-r border-gray-200'} transition-colors">
                        <span class="material-symbols-outlined text-[18px]">auto_awesome</span>
                        <span class="text-[11px] font-bold uppercase tracking-wider">Stylistt</span>
                    </button>
                    <button onclick="App.switchApp('organizerr')" class="flex-1 py-3 flex items-center justify-center gap-2 ${current === 'organizerr' ? 'bg-black text-white' : 'bg-white text-black'} transition-colors">
                        <span class="material-symbols-outlined text-[18px]">inventory_2</span>
                        <span class="text-[11px] font-bold uppercase tracking-wider">Organizerr</span>
                    </button>
                </div>
            </div>
        `;
    },

    // Organizerr bottom nav for clients
    organizerrNav(active) {
        const items = [
            { id: 'home', icon: 'home', route: '/organizerr' },
            { id: 'book', icon: 'calendar_month', route: '/organizerr/book' },
            { id: 'closet', icon: 'checkroom', route: '/organizerr/closet' },
            { id: 'visits', icon: 'event_available', route: '/organizerr/visits' },
            { id: 'account', icon: 'person', route: '/organizerr/account' }
        ];
        return `
            <nav class="fixed bottom-[52px] left-0 right-0 max-w-[430px] mx-auto bg-white/95 backdrop-blur-xl border-t border-gray-100 px-8 py-4 flex justify-between items-center nav-shadow z-50">
                ${items.map(i => `
                    <button onclick="Router.navigate('${i.route}')" class="nav-item ${active === i.id ? 'text-black' : 'text-gray-400'} active:scale-90 transition-transform" data-nav="${i.id}">
                        <span class="material-symbols-outlined text-[28px] ${active === i.id ? 'filled' : ''}">${i.icon}</span>
                    </button>
                `).join('')}
            </nav>
        `;
    },

    // Organizer bottom nav (for professional organizers)
    organizerNav(active) {
        const items = [
            { id: 'dashboard', icon: 'dashboard', route: '/organizer' },
            { id: 'clients', icon: 'group', route: '/organizer/clients' },
            { id: 'schedule', icon: 'calendar_month', route: '/organizer/schedule' },
            { id: 'profile', icon: 'person', route: '/organizer/profile' }
        ];
        return `
            <nav class="fixed bottom-[52px] left-0 right-0 max-w-[430px] mx-auto bg-white/95 backdrop-blur-xl border-t border-gray-100 px-8 py-4 flex justify-between items-center nav-shadow z-50">
                ${items.map(i => `
                    <button onclick="Router.navigate('${i.route}')" class="nav-item ${active === i.id ? 'text-black' : 'text-gray-400'} active:scale-90 transition-transform" data-nav="${i.id}">
                        <span class="material-symbols-outlined text-[28px] ${active === i.id ? 'filled' : ''}">${i.icon}</span>
                    </button>
                `).join('')}
            </nav>
        `;
    },

    // Subscription card for plans page
    subscriptionCard(tier, isCurrentPlan = false) {
        return `
            <div class="relative p-6 border ${isCurrentPlan ? 'border-accent-gold bg-soft-gray' : 'border-gray-200'} ${tier.popular ? 'ring-2 ring-black' : ''}">
                ${tier.popular ? '<div class="absolute -top-3 left-1/2 -translate-x-1/2 bg-black text-white px-3 py-1 text-[10px] uppercase tracking-wider">Most Popular</div>' : ''}
                <h3 class="brand-title text-2xl italic mb-2">${tier.name}</h3>
                <p class="text-3xl font-light mb-4">${tier.priceLabel}</p>
                <ul class="space-y-3 mb-6">
                    ${tier.features.map(f => `
                        <li class="flex items-start gap-2 text-sm text-gray-600">
                            <span class="material-symbols-outlined text-[16px] text-accent-gold mt-0.5">check</span>
                            ${f}
                        </li>
                    `).join('')}
                </ul>
                ${isCurrentPlan ? `
                    <div class="w-full py-3 bg-accent-gold/20 text-accent-gold text-center text-[11px] font-bold uppercase tracking-wider">
                        Current Plan
                    </div>
                ` : `
                    <button onclick="App.subscribe('${tier.id}'); Router.navigate('/organizerr')" class="w-full py-3 bg-black text-white text-[11px] font-bold uppercase tracking-wider active:scale-[0.98] transition-transform">
                        ${tier.popular ? 'Get Started' : 'Select Plan'}
                    </button>
                `}
            </div>
        `;
    }
};

// ============ SCREENS ============
const Screens = {
    // Menu drawer
    showMenu() {
        Modal.show(`
            <div class="py-4">
                <div class="flex items-center gap-4 mb-8 pb-6 border-b border-gray-100">
                    <div class="w-14 h-14 bg-soft-gray rounded-full flex items-center justify-center">
                        <span class="text-xl font-light">${App.state.user?.initials || 'ST'}</span>
                    </div>
                    <div>
                        <h3 class="font-medium">${App.state.user?.name || 'Guest'}</h3>
                        <p class="text-xs text-gray-400">${App.state.user?.email || 'Sign in to continue'}</p>
                    </div>
                </div>
                <div class="space-y-2">
                    <button onclick="Modal.hide(); Router.navigate('/daily-edit')" class="w-full flex items-center gap-4 py-4 px-2 hover:bg-soft-gray transition-colors">
                        <span class="material-symbols-outlined">home</span>
                        <span class="text-sm font-medium">Home</span>
                    </button>
                    <button onclick="Modal.hide(); Router.navigate('/lookbooks')" class="w-full flex items-center gap-4 py-4 px-2 hover:bg-soft-gray transition-colors">
                        <span class="material-symbols-outlined">auto_awesome</span>
                        <span class="text-sm font-medium">Lookbooks</span>
                    </button>
                    <button onclick="Modal.hide(); Router.navigate('/closet')" class="w-full flex items-center gap-4 py-4 px-2 hover:bg-soft-gray transition-colors">
                        <span class="material-symbols-outlined">checkroom</span>
                        <span class="text-sm font-medium">My Closet</span>
                    </button>
                    <button onclick="Modal.hide(); Router.navigate('/insights')" class="w-full flex items-center gap-4 py-4 px-2 hover:bg-soft-gray transition-colors">
                        <span class="material-symbols-outlined">insights</span>
                        <span class="text-sm font-medium">Wardrobe Insights</span>
                    </button>
                    <button onclick="Modal.hide(); Router.navigate('/sustainability')" class="w-full flex items-center gap-4 py-4 px-2 hover:bg-soft-gray transition-colors">
                        <span class="material-symbols-outlined">eco</span>
                        <span class="text-sm font-medium">Sustainability</span>
                    </button>
                    <button onclick="Modal.hide(); Router.navigate('/settings')" class="w-full flex items-center gap-4 py-4 px-2 hover:bg-soft-gray transition-colors">
                        <span class="material-symbols-outlined">settings</span>
                        <span class="text-sm font-medium">Settings</span>
                    </button>
                </div>
                ${App.state.isLoggedIn ? `
                    <button onclick="Modal.hide(); App.logout()" class="w-full mt-8 py-4 border-t border-gray-100 text-red-500 text-sm font-medium">
                        Sign Out
                    </button>
                ` : ''}
            </div>
        `);
    },

    welcome() {
        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white">
                <header class="flex items-center justify-between px-6 pt-12 pb-4">
                    <div class="w-10"></div>
                    <h1 class="brand-logo text-2xl font-medium">Stylistt</h1>
                    <div class="w-10"></div>
                </header>
                <div class="relative mx-6 aspect-[3/4] bg-gray-100 overflow-hidden animate-fade-in">
                    <img src="${App.data.lookbooks[0].image}" alt="Fashion" class="w-full h-full object-cover">
                    <div class="absolute bottom-4 left-4 bg-white/90 backdrop-blur-sm px-3 py-1.5">
                        <span class="text-[10px] uppercase tracking-[0.2em] font-medium">Collection 01</span>
                    </div>
                </div>
                <div class="flex-1 px-6 pt-8 pb-6 animate-fade-in-up">
                    <h2 class="brand-title text-4xl leading-tight mb-4">Turn Your Closet<br><span class="italic">Into a Premium Boutique.</span></h2>
                    <p class="text-gray-500 text-sm leading-relaxed mb-8">AI styling from YOUR actual wardrobe. A professional organizes your closet and scans every piece, then your personal stylist knows everything you own.</p>
                    <button onclick="Router.navigate('/signup')" class="w-full bg-black text-white py-4 text-[11px] font-bold uppercase tracking-[0.2em] mb-4 active:scale-[0.98] transition-transform">Get Started Free</button>
                    <button onclick="Router.navigate('/login')" class="w-full text-center text-[11px] uppercase tracking-[0.2em] text-gray-500 py-2 active:opacity-70">Already have an account? <span class="text-black font-medium">Sign In</span></button>
                </div>
            </div>
        `;
    },

    login() {
        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white">
                <header class="flex items-center justify-between px-6 pt-12 pb-4">
                    <button onclick="Router.navigate('/welcome')" class="active:scale-90 transition-transform">
                        <span class="material-symbols-outlined">arrow_back</span>
                    </button>
                    <h1 class="brand-logo text-2xl font-medium">Stylistt</h1>
                    <div class="w-10"></div>
                </header>
                <div class="flex-1 px-6 pt-8 animate-fade-in-up">
                    <h2 class="brand-title text-3xl italic mb-2">Welcome Back</h2>
                    <p class="text-gray-500 text-sm mb-8">Sign in to access your personal wardrobe atelier.</p>

                    <form id="login-form" class="space-y-4">
                        ${Components.inputField({ type: 'email', name: 'email', placeholder: 'Email address', icon: 'mail' })}
                        ${Components.inputField({ type: 'password', name: 'password', placeholder: 'Password', icon: 'lock' })}

                        <button type="button" onclick="Router.navigate('/forgot-password')" class="text-xs text-gray-500 hover:text-black transition-colors">
                            Forgot password?
                        </button>

                        <button type="submit" class="w-full bg-black text-white py-4 text-[11px] font-bold uppercase tracking-[0.2em] mt-6 active:scale-[0.98] transition-transform">
                            Sign In
                        </button>
                    </form>

                    <div class="flex items-center gap-4 my-8">
                        <div class="flex-1 h-px bg-gray-200"></div>
                        <span class="text-xs text-gray-400">or continue with</span>
                        <div class="flex-1 h-px bg-gray-200"></div>
                    </div>

                    <div class="flex gap-4">
                        <button onclick="Toast.show('Social login coming soon', 'info')" class="flex-1 py-4 border border-gray-200 flex items-center justify-center gap-2 hover:border-black transition-colors">
                            <svg class="w-5 h-5" viewBox="0 0 24 24"><path fill="currentColor" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="currentColor" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="currentColor" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="currentColor" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
                            <span class="text-xs font-medium">Google</span>
                        </button>
                        <button onclick="Toast.show('Social login coming soon', 'info')" class="flex-1 py-4 border border-gray-200 flex items-center justify-center gap-2 hover:border-black transition-colors">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12.152 6.896c-.948 0-2.415-1.078-3.96-1.04-2.04.027-3.91 1.183-4.961 3.014-2.117 3.675-.546 9.103 1.519 12.09 1.013 1.454 2.208 3.09 3.792 3.039 1.52-.065 2.09-.987 3.935-.987 1.831 0 2.35.987 3.96.948 1.637-.026 2.676-1.48 3.676-2.948 1.156-1.688 1.636-3.325 1.662-3.415-.039-.013-3.182-1.221-3.22-4.857-.026-3.04 2.48-4.494 2.597-4.559-1.429-2.09-3.623-2.324-4.39-2.376-2-.156-3.675 1.09-4.61 1.09zM15.53 3.83c.843-1.012 1.4-2.427 1.245-3.83-1.207.052-2.662.805-3.532 1.818-.78.896-1.454 2.338-1.273 3.714 1.338.104 2.715-.688 3.559-1.701"/></svg>
                            <span class="text-xs font-medium">Apple</span>
                        </button>
                    </div>

                    <p class="text-center mt-8 text-sm text-gray-500">
                        Don't have an account? <button onclick="Router.navigate('/signup')" class="text-black font-medium">Sign Up</button>
                    </p>
                </div>
            </div>
        `;

        document.getElementById('login-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const form = e.target;
            const email = form.email.value;
            const password = form.password.value;
            if (App.login(email, password)) {
                Router.navigate('/daily-edit');
            }
        });
    },

    signup() {
        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white">
                <header class="flex items-center justify-between px-6 pt-12 pb-4">
                    <button onclick="Router.navigate('/welcome')" class="active:scale-90 transition-transform">
                        <span class="material-symbols-outlined">arrow_back</span>
                    </button>
                    <h1 class="brand-logo text-2xl font-medium">Stylistt</h1>
                    <div class="w-10"></div>
                </header>
                <div class="flex-1 px-6 pt-8 animate-fade-in-up">
                    <h2 class="brand-title text-3xl italic mb-2">Create Account</h2>
                    <p class="text-gray-500 text-sm mb-8">Join us to discover your personal style DNA.</p>

                    <form id="signup-form" class="space-y-4">
                        ${Components.inputField({ type: 'text', name: 'name', placeholder: 'Full name', icon: 'person' })}
                        ${Components.inputField({ type: 'email', name: 'email', placeholder: 'Email address', icon: 'mail' })}
                        ${Components.inputField({ type: 'password', name: 'password', placeholder: 'Password (min 6 characters)', icon: 'lock' })}

                        <div class="flex items-start gap-3 py-2">
                            <input type="checkbox" id="terms" class="mt-1 w-4 h-4 border-gray-300 rounded">
                            <label for="terms" class="text-xs text-gray-500">
                                I agree to the <button type="button" class="text-black underline">Terms of Service</button> and <button type="button" class="text-black underline">Privacy Policy</button>
                            </label>
                        </div>

                        <button type="submit" class="w-full bg-black text-white py-4 text-[11px] font-bold uppercase tracking-[0.2em] mt-4 active:scale-[0.98] transition-transform">
                            Create Account
                        </button>
                    </form>

                    <p class="text-center mt-8 text-sm text-gray-500">
                        Already have an account? <button onclick="Router.navigate('/login')" class="text-black font-medium">Sign In</button>
                    </p>
                    <p class="text-center mt-4 text-sm text-gray-400">
                        Are you a professional organizer? <button onclick="Router.navigate('/organizer-signup')" class="text-accent-gold font-medium">Join as Organizer</button>
                    </p>
                </div>
            </div>
        `;

        document.getElementById('signup-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const form = e.target;
            const name = form.name.value;
            const email = form.email.value;
            const password = form.password.value;
            const terms = form.terms.checked;

            if (!terms) {
                Toast.show('Please accept the terms', 'error');
                return;
            }

            if (App.signup(name, email, password)) {
                Router.navigate('/style-dna');
            }
        });
    },

    forgotPassword() {
        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white">
                <header class="flex items-center justify-between px-6 pt-12 pb-4">
                    <button onclick="Router.navigate('/login')" class="active:scale-90 transition-transform">
                        <span class="material-symbols-outlined">arrow_back</span>
                    </button>
                    <h1 class="brand-logo text-2xl font-medium">Stylistt</h1>
                    <div class="w-10"></div>
                </header>
                <div class="flex-1 px-6 pt-8 animate-fade-in-up">
                    <div class="w-16 h-16 bg-soft-gray rounded-full flex items-center justify-center mb-6">
                        <span class="material-symbols-outlined text-[32px]">lock_reset</span>
                    </div>
                    <h2 class="brand-title text-3xl italic mb-2">Reset Password</h2>
                    <p class="text-gray-500 text-sm mb-8">Enter your email and we'll send you instructions to reset your password.</p>

                    <form id="forgot-form" class="space-y-4">
                        ${Components.inputField({ type: 'email', name: 'email', placeholder: 'Email address', icon: 'mail' })}

                        <button type="submit" class="w-full bg-black text-white py-4 text-[11px] font-bold uppercase tracking-[0.2em] mt-4 active:scale-[0.98] transition-transform">
                            Send Reset Link
                        </button>
                    </form>

                    <button onclick="Router.navigate('/login')" class="w-full text-center mt-6 text-sm text-gray-500">
                        Back to Sign In
                    </button>
                </div>
            </div>
        `;

        document.getElementById('forgot-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const email = e.target.email.value;
            if (email) {
                Toast.show('Reset link sent to your email!', 'success');
                setTimeout(() => Router.navigate('/login'), 2000);
            } else {
                Toast.show('Please enter your email', 'error');
            }
        });
    },

    styleDNA() {
        const step = App.state.styleDNA.step;
        const quizStep = App.data.quizSteps.find(s => s.id === step);
        const sel = App.state.styleDNA.selections[step];

        // Helper to check if option is selected
        const isSelected = (optionId) => {
            if (quizStep.multiSelect) {
                return Array.isArray(sel) && sel.includes(optionId);
            }
            return sel === optionId;
        };

        // Render different content based on question type
        let contentHTML = '';

        if (quizStep.type === 'image-grid') {
            contentHTML = `
                <div class="grid grid-cols-2 gap-4">
                    ${quizStep.options.map((o, i) => `
                        <div class="cursor-pointer animate-fade-in-up" style="animation-delay: ${i * 0.1}s" onclick="App.selectStyleOption(${step},'${o.id}')" data-option="${o.id}">
                            <div class="quiz-option relative aspect-[4/5] overflow-hidden bg-gray-50 ${isSelected(o.id)?'selected':''}">
                                <img src="${o.image}" alt="${o.label}" class="w-full h-full object-cover ${isSelected(o.id)?'':'grayscale opacity-70'} hover:grayscale-0 hover:opacity-100 transition-all duration-300">
                                ${isSelected(o.id)?'<div class="absolute bottom-3 right-3 bg-black text-white rounded-full w-6 h-6 flex items-center justify-center"><span class="material-symbols-outlined text-[16px]">check</span></div>':''}
                            </div>
                            <div class="mt-3 text-center">
                                <p class="text-[11px] uppercase tracking-[0.15em] font-medium ${isSelected(o.id)?'text-black':'text-gray-600'}">${o.label}</p>
                                <p class="text-[10px] text-gray-400 mt-1">${o.desc}</p>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        } else if (quizStep.type === 'color-palette') {
            contentHTML = `
                <div class="grid grid-cols-2 gap-4">
                    ${quizStep.options.map((o, i) => `
                        <div class="cursor-pointer animate-fade-in-up" style="animation-delay: ${i * 0.1}s" onclick="App.selectStyleOption(${step},'${o.id}')" data-option="${o.id}">
                            <div class="quiz-option p-4 bg-gray-50 ${isSelected(o.id)?'selected':'border border-transparent hover:border-gray-200'} transition-all">
                                <div class="flex justify-center gap-2 mb-4">
                                    ${o.colors.map(c => `<div class="w-10 h-10 rounded-full shadow-sm" style="background-color: ${c}"></div>`).join('')}
                                </div>
                                <p class="text-center text-[11px] uppercase tracking-[0.15em] font-medium ${isSelected(o.id)?'text-black':'text-gray-600'}">${o.label}</p>
                                ${isSelected(o.id)?'<div class="flex justify-center mt-3"><div class="bg-black text-white rounded-full w-5 h-5 flex items-center justify-center"><span class="material-symbols-outlined text-[14px]">check</span></div></div>':''}
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        } else if (quizStep.type === 'text-cards') {
            contentHTML = `
                <div class="space-y-3">
                    ${quizStep.options.map((o, i) => `
                        <div class="cursor-pointer animate-fade-in-up" style="animation-delay: ${i * 0.08}s" onclick="App.selectStyleOption(${step},'${o.id}')" data-option="${o.id}">
                            <div class="quiz-option flex items-center gap-4 p-5 bg-gray-50 ${isSelected(o.id)?'selected bg-black text-white':''} transition-all hover:bg-gray-100 ${isSelected(o.id)?'hover:bg-black':''}">
                                <div class="w-12 h-12 ${isSelected(o.id)?'bg-white/20':'bg-white'} rounded-full flex items-center justify-center flex-shrink-0">
                                    <span class="material-symbols-outlined text-[24px] ${isSelected(o.id)?'text-white':'text-gray-600'}">${o.icon}</span>
                                </div>
                                <div class="flex-1">
                                    <p class="font-medium text-sm">${o.label}</p>
                                    <p class="text-xs ${isSelected(o.id)?'text-gray-300':'text-gray-500'} mt-1">${o.desc}</p>
                                </div>
                                ${isSelected(o.id)?'<span class="material-symbols-outlined text-[20px]">check_circle</span>':''}
                            </div>
                        </div>
                    `).join('')}
                </div>
                ${quizStep.multiSelect ? '<p class="text-center text-xs text-gray-400 mt-4">Select all that apply</p>' : ''}
            `;
        } else if (quizStep.type === 'statement-cards') {
            contentHTML = `
                <div class="space-y-4">
                    ${quizStep.options.map((o, i) => `
                        <div class="cursor-pointer animate-fade-in-up" style="animation-delay: ${i * 0.1}s" onclick="App.selectStyleOption(${step},'${o.id}')" data-option="${o.id}">
                            <div class="quiz-option p-6 bg-gray-50 text-center ${isSelected(o.id)?'selected bg-black text-white':''} transition-all hover:bg-gray-100 ${isSelected(o.id)?'hover:bg-black':''}">
                                <p class="font-medium text-sm mb-2">${o.label}</p>
                                <p class="text-xs ${isSelected(o.id)?'text-gray-300':'text-gray-500'} leading-relaxed">${o.desc}</p>
                                ${isSelected(o.id)?'<div class="mt-4"><span class="material-symbols-outlined text-[24px]">check_circle</span></div>':''}
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white">
                <header class="flex items-center justify-between px-6 pt-12 pb-6">
                    <button onclick="App.prevStyleDNAStep()" class="text-gray-400 active:scale-90 transition-transform"><span class="material-symbols-outlined text-2xl">arrow_back</span></button>
                    <h1 class="brand-logo text-2xl font-bold">Stylistt</h1>
                    <button onclick="Router.navigate('/daily-edit')" class="text-[10px] font-bold uppercase tracking-widest text-gray-400 hover:text-black">Skip</button>
                </header>
                <div class="px-6 mb-6">
                    <div class="flex justify-between mb-2">
                        <span class="text-[10px] font-bold uppercase tracking-[0.2em]">Style DNA</span>
                        <span class="text-[10px] text-gray-400">0${step} / 03</span>
                    </div>
                    <div class="h-[3px] bg-gray-100 rounded-full overflow-hidden"><div class="h-full bg-black transition-all duration-500 rounded-full" style="width:${Math.round(step*33.33)}%"></div></div>
                </div>
                <main class="flex-1 overflow-y-auto px-6 pb-32">
                    <div class="mb-8 text-center animate-fade-in">
                        <h2 class="brand-title text-2xl italic mb-2">${quizStep.title}</h2>
                        <p class="text-xs text-gray-500">${quizStep.subtitle}</p>
                    </div>
                    ${contentHTML}
                </main>
                <div class="fixed bottom-0 left-0 right-0 max-w-[430px] mx-auto bg-white/95 backdrop-blur-sm border-t border-gray-100 p-6">
                    <button onclick="App.nextStyleDNAStep()" class="w-full bg-black text-white py-4 flex items-center justify-center active:scale-[0.98] transition-transform">
                        <span class="text-[11px] font-bold uppercase tracking-[0.3em] mr-2">${step===3?'Complete':'Continue'}</span>
                        <span class="material-symbols-outlined text-sm">arrow_forward</span>
                    </button>
                </div>
            </div>
        `;
    },

    getStarted() {
        const user = App.state.user || {};
        const archetype = user.archetype || 'Style Curator';
        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white">
                <header class="flex items-center justify-center px-6 pt-12 pb-4">
                    <h1 class="brand-logo text-2xl font-medium">Stylistt</h1>
                </header>
                <div class="flex-1 flex flex-col items-center justify-center px-6 pb-12 animate-fade-in">
                    <div class="w-24 h-24 bg-soft-gray rounded-full flex items-center justify-center mb-8">
                        <span class="material-symbols-outlined text-[48px] text-accent-gold">auto_awesome</span>
                    </div>
                    <p class="text-[10px] uppercase tracking-[0.3em] text-gray-400 mb-2">Your Style Profile</p>
                    <h2 class="brand-title text-4xl italic text-center mb-4">${archetype}</h2>
                    <p class="text-gray-500 text-sm text-center leading-relaxed max-w-[280px] mb-12">
                        Your personalized atelier is ready. Let's build your digital wardrobe together.
                    </p>
                    <div class="w-full space-y-4 animate-fade-in-up" style="animation-delay: 0.3s">
                        <button onclick="Router.navigate('/scan')" class="w-full bg-black text-white py-4 text-[11px] font-bold uppercase tracking-[0.2em] flex items-center justify-center gap-3 active:scale-[0.98] transition-transform">
                            <span class="material-symbols-outlined text-[20px]">photo_camera</span>
                            Scan Your First Piece
                        </button>
                        <button onclick="Router.navigate('/lookbooks')" class="w-full border border-black py-4 text-[11px] font-bold uppercase tracking-[0.2em] flex items-center justify-center gap-3 hover:bg-black hover:text-white transition-all active:scale-[0.98]">
                            <span class="material-symbols-outlined text-[20px]">auto_awesome</span>
                            Explore Lookbooks
                        </button>
                        <button onclick="Router.navigate('/daily-edit')" class="w-full text-center py-4 text-[11px] uppercase tracking-[0.2em] text-gray-400 hover:text-black transition-colors">
                            Skip for now
                        </button>
                    </div>
                </div>
            </div>
        `;
    },

    dailyEdit() {
        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white pb-24">
                ${Components.header({ subtitle: 'The Daily Edit' })}
                <main class="flex-1 overflow-y-auto">
                    <div class="px-6 pt-6 animate-fade-in">
                        <div class="relative aspect-[3/4] bg-gray-100 overflow-hidden magazine-shadow">
                            <img src="${App.data.lookbooks[0].image}" alt="Daily Edit" class="w-full h-full object-cover">
                        </div>
                    </div>
                    <div class="px-6 pt-6 animate-fade-in-up">
                        <div class="flex justify-between mb-4">
                            <span class="text-[10px] uppercase tracking-[0.2em] text-gray-400">Volume III / No. 03</span>
                            <span class="text-[10px] uppercase tracking-[0.2em] text-gray-400">${new Date().toLocaleDateString('en-US', { day: '2-digit', month: 'short', year: 'numeric' })}</span>
                        </div>
                        <h2 class="brand-title text-5xl italic mb-4">The Modern</h2>
                        <h3 class="brand-title text-3xl italic text-gray-500 mb-6">Wardrobe Edit</h3>
                        <p class="text-sm text-gray-500 mb-8">Explore this season's essential pieces curated for the contemporary woman.</p>
                    </div>
                    <div class="px-6 grid grid-cols-2 gap-4 mb-8">
                        <button onclick="Router.navigate('/lookbooks')" class="flex items-center justify-center gap-2 py-4 border border-black hover:bg-black hover:text-white transition-all active:scale-[0.98]">
                            <span class="material-symbols-outlined">auto_awesome</span>
                            <span class="text-[11px] font-bold uppercase tracking-wider">Lookbooks</span>
                        </button>
                        <button onclick="Router.navigate('/insights')" class="flex items-center justify-center gap-2 py-4 border border-black hover:bg-black hover:text-white transition-all active:scale-[0.98]">
                            <span class="material-symbols-outlined">insights</span>
                            <span class="text-[11px] font-bold uppercase tracking-wider">Insights</span>
                        </button>
                    </div>
                    <div class="px-6 mb-8">
                        <div class="bg-soft-gray p-6">
                            <span class="text-[10px] uppercase tracking-wider text-gray-400">Current Archetype</span>
                            <h4 class="brand-title text-2xl italic mb-2">${App.state.user?.archetype || 'Discover Yours'}</h4>
                            <p class="text-xs text-gray-500">Your style favors structured silhouettes and neutral tones.</p>
                            <button onclick="Router.navigate('/style-dna')" class="mt-4 text-[10px] font-bold uppercase tracking-wider underline">Retake Quiz</button>
                        </div>
                    </div>
                </main>
                ${Components.bottomNav('home')}
            </div>
        `;
    },

    lookbooks() {
        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white pb-24">
                ${Components.header({})}
                <main class="flex-1 overflow-y-auto">
                    <div class="px-6 py-10">
                        <p class="text-[10px] uppercase tracking-[0.4em] text-gray-400 mb-2">Personal Curation</p>
                        <h2 class="brand-title text-4xl italic">Curated Lookbooks</h2>
                    </div>
                    <div class="flex flex-col gap-16 px-6 pb-8">
                        ${App.data.lookbooks.map((look, i) => `
                            <article class="animate-fade-in-up" style="animation-delay: ${i * 0.15}s">
                                <div class="relative aspect-[3/4] bg-gray-100 overflow-hidden mb-6 group">
                                    <img src="${look.image}" alt="${look.title}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700">
                                    <button onclick="event.stopPropagation(); App.toggleFavorite('${look.id}')" class="absolute top-4 right-4 heart-btn bg-white/90 p-2 rounded-full ${App.isFavorite(look.id)?'active':''} active:scale-110 transition-transform">
                                        <span class="material-symbols-outlined text-[20px]">favorite</span>
                                    </button>
                                </div>
                                <h3 class="brand-title text-[28px] font-bold mb-3">${look.title}</h3>
                                <p class="text-gray-500 text-sm mb-6">${look.description}</p>
                                <div class="flex gap-4">
                                    <button onclick="Router.navigate('/lookbook/${look.id}')" class="flex-1 bg-black text-white py-4 text-[11px] font-bold uppercase tracking-[0.2em] active:scale-[0.98] transition-transform">Wear Today</button>
                                    <button onclick="App.toggleFavorite('${look.id}')" class="flex-1 border border-black py-4 text-[11px] font-bold uppercase tracking-[0.2em] hover:bg-black hover:text-white transition-all active:scale-[0.98]">${App.isFavorite(look.id) ? 'Saved' : 'Save Look'}</button>
                                </div>
                            </article>
                        `).join('')}
                    </div>
                </main>
                ${Components.bottomNav('home')}
            </div>
        `;
    },

    closet() {
        const cats = App.data.categories;
        const filter = App.state.closetFilter;
        const allItems = App.state.closetItems;
        const items = allItems.filter(item => filter === 'All Items' || item.category === filter);
        const tier = App.state.user?.subscription?.tier || 'free';
        const tierData = App.data.subscriptionTiers.find(t => t.id === tier);
        const itemLimit = tierData?.itemLimit || App.data.freeItemLimit;
        const isFree = tier === 'free';
        const atLimit = isFree && allItems.length >= itemLimit;

        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white pb-24">
                <header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md pt-12 pb-4 px-6 border-b border-gray-50">
                    <div class="flex items-center justify-between">
                        <button onclick="Screens.showMenu()" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">menu</span></button>
                        <div class="text-center">
                            <h1 class="brand-logo text-2xl font-medium">Stylistt</h1>
                            <p class="text-[10px] uppercase tracking-[0.3em] text-gray-400">My Closet</p>
                        </div>
                        <button onclick="Router.navigate('/scan')" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">add</span></button>
                    </div>
                </header>

                ${allItems.length === 0 ? `
                    <!-- Empty State - Premium Boutique Awaits -->
                    <main class="flex-1 px-6 py-8">
                        <div class="text-center animate-fade-in">
                            <div class="w-24 h-24 bg-accent-gold/10 rounded-full flex items-center justify-center mx-auto mb-6">
                                <span class="material-symbols-outlined text-[48px] text-accent-gold">storefront</span>
                            </div>
                            <h2 class="brand-title text-3xl italic mb-3">Your Premium Boutique Awaits</h2>
                            <p class="text-sm text-gray-500 mb-8 max-w-[280px] mx-auto">Transform your closet into a curated collection. AI styling that knows every piece you own.</p>

                            <!-- Progress indicator -->
                            <div class="bg-soft-gray p-6 mb-6">
                                <p class="text-[10px] uppercase tracking-[0.2em] text-gray-400 mb-3">Free Tier Progress</p>
                                <div class="flex justify-center gap-2 mb-3">
                                    ${[1,2,3,4,5].map(i => `<div class="w-8 h-8 rounded-full border-2 ${i <= allItems.length ? 'bg-black border-black' : 'border-gray-300'} flex items-center justify-center"><span class="text-xs ${i <= allItems.length ? 'text-white' : 'text-gray-400'}">${i}</span></div>`).join('')}
                                </div>
                                <p class="text-sm text-gray-600">${allItems.length} of ${itemLimit} free scans used</p>
                            </div>

                            <button onclick="Router.navigate('/scan')" class="w-full bg-black text-white py-4 text-[11px] font-bold uppercase tracking-[0.2em] mb-4 active:scale-[0.98] transition-transform">
                                <span class="flex items-center justify-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]">photo_camera</span>
                                    Scan Your First Item
                                </span>
                            </button>

                            <div class="border-t border-gray-100 pt-6 mt-6">
                                <p class="text-[10px] uppercase tracking-[0.2em] text-gray-400 mb-3">Or get your entire closet scanned</p>
                                <button onclick="Router.navigate('/transform')" class="w-full border-2 border-accent-gold text-accent-gold py-4 text-[11px] font-bold uppercase tracking-[0.2em] hover:bg-accent-gold hover:text-white transition-all">
                                    <span class="flex items-center justify-center gap-2">
                                        <span class="material-symbols-outlined text-[18px]">auto_awesome</span>
                                        Book a Pro Visit
                                    </span>
                                </button>
                                <p class="text-xs text-gray-400 mt-2">A stylist scans your entire wardrobe in ~2 hours</p>
                            </div>
                        </div>
                    </main>
                ` : atLimit ? `
                    <!-- At Limit State - Upgrade Prompt -->
                    <div class="sticky top-[88px] z-40 bg-white border-b border-gray-100">
                        <div class="flex gap-6 px-6 overflow-x-auto">
                            ${cats.map(c => `
                                <button onclick="App.setClosetFilter('${c}')" class="py-4 text-sm whitespace-nowrap transition-colors ${filter===c?'text-black font-medium border-b-2 border-black':'text-gray-400 hover:text-gray-600'}">${c}</button>
                            `).join('')}
                        </div>
                    </div>
                    <main class="flex-1 p-6">
                        <!-- Upgrade Banner -->
                        <div class="bg-black text-white p-6 mb-6 animate-fade-in">
                            <div class="flex items-start gap-4">
                                <div class="w-12 h-12 bg-accent-gold rounded-full flex items-center justify-center flex-shrink-0">
                                    <span class="material-symbols-outlined text-white">auto_awesome</span>
                                </div>
                                <div class="flex-1">
                                    <p class="text-[10px] uppercase tracking-[0.2em] text-gray-400 mb-1">You've unlocked AI styling!</p>
                                    <h3 class="brand-title text-xl italic mb-2">But with only ${itemLimit} items...</h3>
                                    <p class="text-sm text-gray-300 mb-4">Average closet: 120+ items. Yours: ${allItems.length}.</p>
                                    <button onclick="Router.navigate('/transform')" class="w-full bg-accent-gold text-white py-3 text-[11px] font-bold uppercase tracking-[0.2em]">
                                        Transform My Closet
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            ${items.map(item => Components.closetItem(item)).join('')}
                        </div>
                        <p class="text-center py-8 text-[10px] uppercase tracking-[0.2em] text-gray-400">${allItems.length} of ${itemLimit} free items</p>
                    </main>
                ` : `
                    <!-- Normal State with Progress -->
                    <div class="sticky top-[88px] z-40 bg-white border-b border-gray-100">
                        <div class="flex gap-6 px-6 overflow-x-auto">
                            ${cats.map(c => `
                                <button onclick="App.setClosetFilter('${c}')" class="py-4 text-sm whitespace-nowrap transition-colors ${filter===c?'text-black font-medium border-b-2 border-black':'text-gray-400 hover:text-gray-600'}">${c}</button>
                            `).join('')}
                        </div>
                    </div>
                    <main class="flex-1 p-6">
                        ${isFree ? `
                            <!-- Free tier progress bar -->
                            <div class="bg-soft-gray p-4 mb-6 flex items-center justify-between">
                                <div>
                                    <p class="text-[10px] uppercase tracking-[0.2em] text-gray-400">Free scans</p>
                                    <p class="text-sm font-medium">${allItems.length} of ${itemLimit} used</p>
                                </div>
                                <div class="flex gap-1">
                                    ${[1,2,3,4,5].map(i => `<div class="w-3 h-3 rounded-full ${i <= allItems.length ? 'bg-black' : 'bg-gray-300'}"></div>`).join('')}
                                </div>
                            </div>
                        ` : ''}

                        <div class="grid grid-cols-2 gap-4">
                            ${items.map(item => Components.closetItem(item)).join('')}
                        </div>
                        <p class="text-center py-8 text-[10px] uppercase tracking-[0.2em] text-gray-400">${allItems.length} item${allItems.length !== 1 ? 's' : ''} in collection</p>
                    </main>
                `}
                ${Components.bottomNav('closet')}
            </div>
        `;
    },

    aiOutfit() {
        const occasions = App.data.occasions;
        const closetItems = App.state.closetItems || [];
        const currentOccasion = App.state.currentOccasion || occasions[0];
        const currentOutfit = App.state.currentGeneratedOutfit;

        // Check if user has enough items
        if (closetItems.length < 2) {
            Screens.showAiOutfitEmptyState();
            return;
        }

        // If no outfit generated yet, generate one
        if (!currentOutfit) {
            Screens.generateNewOutfit(currentOccasion);
            return;
        }

        // Find items by ID from closet
        const getItem = (id) => closetItems.find(item => item.id === id);
        const topItem = getItem(currentOutfit.outfit?.top);
        const bottomItem = getItem(currentOutfit.outfit?.bottom);
        const outerwearItem = getItem(currentOutfit.outfit?.outerwear);
        const shoesItem = getItem(currentOutfit.outfit?.shoes);

        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white pb-24">
                <header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md pt-12 pb-4 px-6 border-b border-gray-50">
                    <div class="flex items-center justify-between">
                        <button onclick="Screens.showMenu()" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">menu</span></button>
                        <div class="text-center">
                            <h1 class="brand-logo text-2xl font-medium italic">Stylistt</h1>
                            <p class="text-[10px] uppercase tracking-[0.3em] text-gray-400">AI Outfit Generator</p>
                        </div>
                        <button onclick="Router.navigate('/closet')" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">checkroom</span></button>
                    </div>
                </header>

                <!-- Occasion Tabs -->
                <div class="border-b border-gray-100 overflow-x-auto">
                    <div class="flex gap-6 px-6 min-w-max">
                        ${occasions.map(occ => `
                            <button onclick="Screens.selectOccasion('${occ}')" class="py-4 ${occ === currentOccasion ? 'border-b-2 border-black' : 'text-gray-400'} whitespace-nowrap transition-colors hover:text-black">
                                <span class="brand-title text-lg italic">${occ}</span>
                            </button>
                        `).join('')}
                    </div>
                </div>

                <main class="flex-1 px-6 py-6 overflow-y-auto">
                    <!-- Match Score -->
                    <div class="flex items-center justify-between mb-6">
                        <div>
                            <p class="text-[10px] uppercase tracking-wider text-gray-400">AI Match Score</p>
                            <p class="text-4xl font-light">${currentOutfit.matchScore || 85}%</p>
                        </div>
                        <button onclick="App.toggleFavorite('outfit-${currentOutfit.id}')" class="w-12 h-12 border border-gray-200 rounded-full flex items-center justify-center active:scale-90 transition-transform">
                            <span class="material-symbols-outlined text-[24px] ${App.isFavorite('outfit-' + currentOutfit.id) ? 'filled text-accent-gold' : ''}">favorite</span>
                        </button>
                    </div>

                    <!-- Outfit Items Grid -->
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        ${topItem ? `
                            <div class="aspect-square bg-gray-100 rounded-lg overflow-hidden relative group">
                                <img src="${topItem.image}" alt="${topItem.name}" class="w-full h-full object-cover">
                                <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3">
                                    <p class="text-white text-xs font-medium truncate">${topItem.name}</p>
                                    <p class="text-white/70 text-[10px] uppercase">Top</p>
                                </div>
                            </div>
                        ` : ''}
                        ${bottomItem ? `
                            <div class="aspect-square bg-gray-100 rounded-lg overflow-hidden relative group">
                                <img src="${bottomItem.image}" alt="${bottomItem.name}" class="w-full h-full object-cover">
                                <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3">
                                    <p class="text-white text-xs font-medium truncate">${bottomItem.name}</p>
                                    <p class="text-white/70 text-[10px] uppercase">Bottom</p>
                                </div>
                            </div>
                        ` : ''}
                        ${outerwearItem ? `
                            <div class="aspect-square bg-gray-100 rounded-lg overflow-hidden relative group">
                                <img src="${outerwearItem.image}" alt="${outerwearItem.name}" class="w-full h-full object-cover">
                                <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3">
                                    <p class="text-white text-xs font-medium truncate">${outerwearItem.name}</p>
                                    <p class="text-white/70 text-[10px] uppercase">Layer</p>
                                </div>
                            </div>
                        ` : ''}
                        ${shoesItem ? `
                            <div class="aspect-square bg-gray-100 rounded-lg overflow-hidden relative group">
                                <img src="${shoesItem.image}" alt="${shoesItem.name}" class="w-full h-full object-cover">
                                <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3">
                                    <p class="text-white text-xs font-medium truncate">${shoesItem.name}</p>
                                    <p class="text-white/70 text-[10px] uppercase">Shoes</p>
                                </div>
                            </div>
                        ` : ''}
                    </div>

                    <!-- AI Explanation -->
                    ${currentOutfit.explanation ? `
                        <div class="bg-soft-gray p-4 mb-6 rounded-lg">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="material-symbols-outlined text-accent-gold text-[18px]">auto_awesome</span>
                                <span class="text-[10px] uppercase tracking-wider font-medium">Why This Works</span>
                            </div>
                            <p class="text-sm text-gray-600 leading-relaxed">${currentOutfit.explanation}</p>
                        </div>
                    ` : ''}

                    <!-- Styling Tips -->
                    ${currentOutfit.stylingTips ? `
                        <div class="border border-gray-100 p-4 mb-6 rounded-lg">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="material-symbols-outlined text-[18px]">lightbulb</span>
                                <span class="text-[10px] uppercase tracking-wider font-medium">Styling Tips</span>
                            </div>
                            <p class="text-sm text-gray-600 leading-relaxed">${currentOutfit.stylingTips}</p>
                        </div>
                    ` : ''}

                    <!-- Action Buttons -->
                    <div class="flex justify-center gap-4 mb-6">
                        <button onclick="Screens.generateNewOutfit('${currentOccasion}')" class="flex flex-col items-center gap-2 p-4 bg-black text-white rounded-lg active:scale-95 transition-transform">
                            <div class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center"><span class="material-symbols-outlined">autorenew</span></div>
                            <span class="text-[10px] uppercase tracking-wider">New Outfit</span>
                        </button>
                    </div>

                    <button onclick="Screens.saveOutfit()" class="w-full bg-black text-white py-4 text-[11px] font-bold uppercase tracking-[0.2em] active:scale-[0.98] transition-transform">
                        Save This Look
                    </button>
                </main>
                ${Components.bottomNav('styling')}
            </div>
        `;
    },

    showAiOutfitEmptyState() {
        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white pb-24">
                <header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md pt-12 pb-4 px-6 border-b border-gray-50">
                    <div class="flex items-center justify-between">
                        <button onclick="Screens.showMenu()" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">menu</span></button>
                        <div class="text-center">
                            <h1 class="brand-logo text-2xl font-medium italic">Stylistt</h1>
                            <p class="text-[10px] uppercase tracking-[0.3em] text-gray-400">AI Outfit Generator</p>
                        </div>
                        <div class="w-10"></div>
                    </div>
                </header>
                <main class="flex-1 flex flex-col items-center justify-center px-6 text-center">
                    <div class="w-24 h-24 bg-soft-gray rounded-full flex items-center justify-center mb-6">
                        <span class="material-symbols-outlined text-[48px] text-gray-400">styler</span>
                    </div>
                    <h2 class="brand-title text-2xl italic mb-2">Build Your Closet First</h2>
                    <p class="text-sm text-gray-500 mb-8 max-w-[280px]">Add at least 2 items to your closet so our AI can create personalized outfit combinations.</p>
                    <button onclick="Router.navigate('/scan')" class="bg-black text-white px-8 py-4 text-[11px] font-bold uppercase tracking-[0.2em] active:scale-[0.98] transition-transform">
                        Scan Your First Item
                    </button>
                </main>
                ${Components.bottomNav('styling')}
            </div>
        `;
    },

    async generateNewOutfit(occasion) {
        // Show loading state
        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white items-center justify-center">
                <div class="text-center px-8 animate-fade-in">
                    <div class="relative w-24 h-24 mx-auto mb-8">
                        <div class="absolute inset-0 border-4 border-gray-200 rounded-full"></div>
                        <div class="absolute inset-0 border-4 border-black rounded-full border-t-transparent animate-spin"></div>
                        <span class="material-symbols-outlined text-[32px] absolute inset-0 flex items-center justify-center">styler</span>
                    </div>
                    <h2 class="brand-title text-2xl italic mb-2">Creating Your Look</h2>
                    <p class="text-sm text-gray-500 mb-4">Our AI is curating the perfect outfit for <span class="font-medium">${occasion}</span>...</p>
                    <div class="space-y-2 text-left max-w-[200px] mx-auto">
                        <div class="flex items-center gap-3 text-sm text-gray-600 animate-pulse">
                            <span class="material-symbols-outlined text-accent-gold">check_circle</span>
                            <span>Analyzing your closet</span>
                        </div>
                        <div class="flex items-center gap-3 text-sm text-gray-400 animate-pulse" style="animation-delay: 0.5s">
                            <span class="material-symbols-outlined">pending</span>
                            <span>Matching colors & styles</span>
                        </div>
                        <div class="flex items-center gap-3 text-sm text-gray-400 animate-pulse" style="animation-delay: 1s">
                            <span class="material-symbols-outlined">pending</span>
                            <span>Writing styling advice</span>
                        </div>
                    </div>
                </div>
            </div>
        `;

        try {
            const response = await fetch('/api/generate-outfit', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    closetItems: App.state.closetItems,
                    occasion: occasion,
                    styleDNA: App.state.user?.styleDNA || {}
                })
            });

            if (!response.ok) {
                throw new Error('Failed to generate outfit');
            }

            const outfit = await response.json();
            App.state.currentGeneratedOutfit = outfit;
            App.state.currentOccasion = occasion;
            Screens.aiOutfit();

        } catch (error) {
            console.error('Outfit generation error:', error);
            Toast.show('Failed to generate outfit. Please try again.', 'error');
            App.state.currentGeneratedOutfit = null;
            Screens.aiOutfit();
        }
    },

    selectOccasion(occasion) {
        App.state.currentOccasion = occasion;
        App.state.currentGeneratedOutfit = null; // Clear to regenerate
        Screens.generateNewOutfit(occasion);
    },

    saveOutfit() {
        const outfit = App.state.currentGeneratedOutfit;
        if (outfit) {
            App.updateUser({ looksCreated: (App.state.user?.looksCreated || 0) + 1 });
            Toast.show('Look saved to your collection!', 'success');
        }
    },

    scan() {
        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white">
                <header class="flex items-center justify-between px-6 pt-12 pb-4">
                    <button onclick="history.back()" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">close</span></button>
                    <h1 class="brand-logo text-xl font-medium">Stylistt</h1>
                    <button class="active:scale-90 transition-transform"><span class="material-symbols-outlined">bolt</span></button>
                </header>
                <div class="px-6 py-4">
                    <h2 class="brand-title text-2xl mb-2">01 <span class="font-normal">Front View</span></h2>
                    <div class="flex gap-2">
                        <div class="flex-1 h-[3px] bg-black"></div>
                        <div class="flex-1 h-[3px] bg-gray-200"></div>
                        <div class="flex-1 h-[3px] bg-gray-200"></div>
                    </div>
                </div>
                <div class="flex-1 px-6 py-4">
                    <div id="camera-preview" class="relative aspect-[3/4] bg-gray-100 overflow-hidden flex items-center justify-center">
                        <img id="preview-image" class="hidden w-full h-full object-cover">
                        <div id="camera-placeholder" class="flex flex-col items-center justify-center">
                            <span class="material-symbols-outlined text-[80px] text-gray-300">photo_camera</span>
                            <p class="text-sm text-gray-400 mt-2">Tap to capture or upload</p>
                        </div>
                        <div class="absolute inset-8 border-2 border-dashed border-black/30 rounded-lg pointer-events-none"></div>
                    </div>
                    <input type="file" id="camera-input" accept="image/*" capture="environment" class="hidden" onchange="Screens.handleImageCapture(event)">
                    <div class="flex justify-center py-8">
                        <button onclick="document.getElementById('camera-input').click()" class="w-20 h-20 bg-black rounded-full flex items-center justify-center camera-shadow active:scale-95 transition-transform">
                            <div class="w-16 h-16 border-4 border-white rounded-full"></div>
                        </button>
                    </div>
                    <div class="flex justify-center gap-4">
                        <div class="w-16 h-20 border-2 border-black flex flex-col items-center justify-center bg-black text-white">
                            <span class="material-symbols-outlined text-[20px]">add</span>
                            <span class="text-[8px] uppercase">Front</span>
                        </div>
                        <div class="w-16 h-20 border border-gray-200 flex items-center justify-center text-gray-400 hover:border-black hover:text-black transition-colors cursor-pointer">
                            <span class="text-[8px] uppercase">Back</span>
                        </div>
                        <div class="w-16 h-20 border border-gray-200 flex items-center justify-center text-gray-400 hover:border-black hover:text-black transition-colors cursor-pointer">
                            <span class="text-[8px] uppercase">Label</span>
                        </div>
                    </div>
                </div>
            </div>
        `;
    },

    async handleImageCapture(event) {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = async (e) => {
                const preview = document.getElementById('preview-image');
                const placeholder = document.getElementById('camera-placeholder');
                preview.src = e.target.result;
                preview.classList.remove('hidden');
                placeholder.classList.add('hidden');

                // Store the image for scan results
                App.state.currentScanImage = e.target.result;

                // Show processing screen
                Screens.showScanProcessing();

                try {
                    // Call real AI analysis API
                    const response = await fetch('/api/analyze-item', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ image: e.target.result })
                    });

                    if (!response.ok) {
                        throw new Error('Analysis failed');
                    }

                    const analysis = await response.json();
                    App.state.currentScanAnalysis = analysis;
                    Router.navigate('/scan/results');

                } catch (error) {
                    console.error('Scan analysis error:', error);
                    Toast.show('Analysis failed. Please try again.', 'error');
                    Router.navigate('/scan');
                }
            };
            reader.readAsDataURL(file);
        }
    },

    showScanProcessing() {
        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white items-center justify-center">
                <div class="text-center px-8 animate-fade-in">
                    <div class="relative w-24 h-24 mx-auto mb-8">
                        <div class="absolute inset-0 border-4 border-gray-200 rounded-full"></div>
                        <div class="absolute inset-0 border-4 border-black rounded-full border-t-transparent animate-spin"></div>
                        <span class="material-symbols-outlined text-[32px] absolute inset-0 flex items-center justify-center">checkroom</span>
                    </div>
                    <h2 class="brand-title text-2xl italic mb-2">Analyzing Your Piece</h2>
                    <p class="text-sm text-gray-500 mb-8">Our AI is identifying fabric, color, and styling details...</p>
                    <div class="space-y-2 text-left max-w-[200px] mx-auto">
                        <div class="flex items-center gap-3 text-sm text-gray-600 animate-pulse">
                            <span class="material-symbols-outlined text-accent-gold">check_circle</span>
                            <span>Detecting category</span>
                        </div>
                        <div class="flex items-center gap-3 text-sm text-gray-400 animate-pulse" style="animation-delay: 0.5s">
                            <span class="material-symbols-outlined">pending</span>
                            <span>Analyzing fabric</span>
                        </div>
                        <div class="flex items-center gap-3 text-sm text-gray-400 animate-pulse" style="animation-delay: 1s">
                            <span class="material-symbols-outlined">pending</span>
                            <span>Generating styling notes</span>
                        </div>
                    </div>
                </div>
            </div>
        `;
    },

    scanResults() {
        const image = App.state.currentScanImage;
        const analysis = App.state.currentScanAnalysis || {};

        // Use AI analysis or fallback to defaults
        const name = analysis.name || 'Unidentified Item';
        const brand = analysis.brand || 'Unknown';
        const category = analysis.category || 'General';
        const material = analysis.material || 'Mixed';
        const color = analysis.color || 'Neutral';
        const qualityTier = analysis.qualityTier || 'contemporary';
        const stylingNotes = analysis.stylingNotes || '';
        const styleTags = analysis.styleTags || [];
        const occasions = analysis.occasions || [];

        // Color mapping for visual display
        const colorMap = {
            'black': '#1a1a1a', 'charcoal': '#36454f', 'gray': '#808080', 'grey': '#808080',
            'white': '#ffffff', 'cream': '#fffdd0', 'ivory': '#fffff0', 'beige': '#f5f5dc',
            'navy': '#000080', 'blue': '#0066cc', 'light blue': '#add8e6', 'royal blue': '#4169e1',
            'red': '#dc143c', 'burgundy': '#800020', 'wine': '#722f37', 'maroon': '#800000',
            'green': '#228b22', 'olive': '#808000', 'sage': '#9dc183', 'forest': '#228b22',
            'brown': '#8b4513', 'tan': '#d2b48c', 'camel': '#c19a6b', 'chocolate': '#7b3f00',
            'pink': '#ffc0cb', 'blush': '#de5d83', 'rose': '#ff007f', 'coral': '#ff7f50',
            'purple': '#800080', 'lavender': '#e6e6fa', 'plum': '#dda0dd', 'violet': '#ee82ee',
            'yellow': '#ffd700', 'gold': '#ffd700', 'mustard': '#ffdb58', 'orange': '#ff8c00'
        };
        const colorHex = colorMap[color.toLowerCase()] || '#808080';

        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white">
                <header class="flex items-center justify-between px-6 pt-12 pb-4">
                    <button onclick="Router.navigate('/scan')" class="w-10 h-10 flex items-center justify-center rounded-full border border-gray-200 active:scale-90 transition-transform"><span class="material-symbols-outlined text-[20px]">arrow_back</span></button>
                    <div class="bg-accent-gold/10 px-4 py-2 rounded-full flex items-center gap-2">
                        <span class="material-symbols-outlined text-accent-gold text-[16px]">auto_awesome</span>
                        <span class="text-[10px] uppercase tracking-wider font-medium">AI Verified</span>
                    </div>
                    <button onclick="Screens.editScanAnalysis()" class="w-10 h-10 flex items-center justify-center rounded-full border border-gray-200 active:scale-90 transition-transform"><span class="material-symbols-outlined text-[20px]">edit</span></button>
                </header>
                <div class="flex-1 bg-gradient-to-b from-gray-100 to-white">
                    <div class="h-64 flex items-center justify-center">
                        ${image ? `<img src="${image}" alt="Scanned item" class="h-full w-auto object-contain rounded-lg shadow-lg">` : `
                            <div class="w-48 h-60 bg-gray-200 flex items-center justify-center">
                                <span class="material-symbols-outlined text-[48px] text-gray-400">checkroom</span>
                            </div>
                        `}
                    </div>
                </div>
                <div class="bg-white rounded-t-3xl -mt-4 px-6 pt-8 pb-8 animate-fade-in-up">
                    <div class="w-12 h-1 bg-gray-200 rounded-full mx-auto mb-6"></div>
                    <div class="text-center mb-6">
                        <h2 class="brand-title text-3xl italic mb-2">${name}</h2>
                        <p class="text-[10px] uppercase tracking-[0.2em] text-gray-400">${analysis.type || category}</p>
                    </div>

                    ${styleTags.length > 0 ? `
                        <div class="flex flex-wrap gap-2 justify-center mb-6">
                            ${styleTags.slice(0, 4).map(tag => `
                                <span class="px-3 py-1 bg-soft-gray text-[10px] uppercase tracking-wider">${tag}</span>
                            `).join('')}
                        </div>
                    ` : ''}

                    <div class="space-y-4 mb-6">
                        ${brand && brand !== 'Unknown' ? `
                            <div class="flex justify-between py-4 border-b border-gray-100">
                                <span class="text-[10px] uppercase tracking-wider text-gray-400">Brand</span>
                                <div class="text-right">
                                    <span class="block text-lg font-medium">${brand}</span>
                                    <span class="text-[10px] uppercase text-accent-gold">AI Detected</span>
                                </div>
                            </div>
                        ` : ''}
                        <div class="flex justify-between py-4 border-b border-gray-100">
                            <span class="text-[10px] uppercase tracking-wider text-gray-400">Category</span>
                            <span class="text-lg font-medium">${category}</span>
                        </div>
                        <div class="flex justify-between py-4 border-b border-gray-100">
                            <span class="text-[10px] uppercase tracking-wider text-gray-400">Material</span>
                            <span class="text-lg font-medium">${material}</span>
                        </div>
                        <div class="flex justify-between py-4 border-b border-gray-100">
                            <span class="text-[10px] uppercase tracking-wider text-gray-400">Color</span>
                            <div class="flex items-center gap-2">
                                <div class="w-6 h-6 rounded-full border-2 border-white shadow" style="background-color: ${colorHex}"></div>
                                <span class="text-lg font-medium">${color}</span>
                            </div>
                        </div>
                        <div class="flex justify-between py-4 border-b border-gray-100">
                            <span class="text-[10px] uppercase tracking-wider text-gray-400">Quality</span>
                            <span class="text-lg font-medium capitalize">${qualityTier}</span>
                        </div>
                    </div>

                    ${stylingNotes ? `
                        <div class="bg-soft-gray p-4 mb-6">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="material-symbols-outlined text-accent-gold text-[18px]">lightbulb</span>
                                <span class="text-[10px] uppercase tracking-wider font-medium">Styling Tips</span>
                            </div>
                            <p class="text-sm text-gray-600 leading-relaxed">${stylingNotes}</p>
                        </div>
                    ` : ''}

                    ${occasions.length > 0 ? `
                        <div class="mb-6">
                            <span class="text-[10px] uppercase tracking-wider text-gray-400 block mb-2">Perfect For</span>
                            <div class="flex flex-wrap gap-2">
                                ${occasions.slice(0, 5).map(occ => `
                                    <span class="px-3 py-1 border border-gray-200 text-[10px] uppercase tracking-wider">${occ}</span>
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}

                    <button onclick="Screens.confirmScan()" class="w-full bg-black text-white py-4 flex items-center justify-center gap-2 active:scale-[0.98] transition-transform">
                        <span class="text-[11px] font-bold uppercase tracking-wider">Add to Closet</span>
                        <span class="material-symbols-outlined text-[18px]">arrow_forward</span>
                    </button>
                </div>
            </div>
        `;
    },

    editScanAnalysis() {
        Toast.show('Edit feature coming soon!', 'info');
    },

    confirmScan() {
        const analysis = App.state.currentScanAnalysis || {};

        const item = {
            id: analysis.id || `item_${Date.now()}`,
            name: analysis.name || 'Unidentified Item',
            brand: analysis.brand || null,
            category: analysis.category || 'General',
            type: analysis.type || analysis.category || 'Item',
            material: analysis.material || 'Mixed',
            color: analysis.color || 'Neutral',
            colorFamily: analysis.colorFamily || 'neutral',
            styleTags: analysis.styleTags || [],
            occasions: analysis.occasions || [],
            seasons: analysis.seasons || [],
            qualityTier: analysis.qualityTier || 'contemporary',
            stylingNotes: analysis.stylingNotes || '',
            image: App.state.currentScanImage,
            scannedAt: new Date().toISOString()
        };

        App.addToCloset(item);
        App.state.currentScanImage = null;
        App.state.currentScanAnalysis = null;
        Router.navigate('/closet');
    },

    insights() {
        const palette = App.data.palette;
        const user = App.state.user || {};
        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white pb-24">
                ${Components.header({ subtitle: 'Wardrobe Insights' })}
                <main class="flex-1 overflow-y-auto">
                    <div class="px-6 py-12 text-center animate-fade-in">
                        <p class="text-[10px] uppercase tracking-[0.3em] text-gray-400 mb-2">Total Items</p>
                        <h2 class="text-7xl font-light mb-4">${user.totalItems || App.state.closetItems.length}</h2>
                        <div class="inline-flex items-center gap-2 px-4 py-2 bg-soft-gray rounded-full">
                            <span class="material-symbols-outlined text-[16px] text-green-500">trending_up</span>
                            <span class="text-sm text-green-600">+${Math.floor(Math.random() * 5) + 1} this month</span>
                        </div>
                    </div>
                    <div class="px-6 py-8 border-t border-gray-100 animate-fade-in-up">
                        <div class="flex justify-between mb-6">
                            <h3 class="brand-title text-2xl italic">Signature Palette</h3>
                            <span class="text-[10px] uppercase tracking-wider text-gray-400">Most Worn</span>
                        </div>
                        <div class="flex justify-between mb-6">
                            ${palette.map(p => `
                                <div class="flex flex-col items-center">
                                    <div class="w-16 h-16 rounded-full flex items-center justify-center mb-2 palette-circle" style="background:${p.color}">
                                        <span class="text-xs font-medium ${p.color==='#F3EFE0'?'text-black':'text-white'}">${p.percentage}%</span>
                                    </div>
                                    <span class="text-[10px] uppercase tracking-wider text-gray-500">${p.name}</span>
                                </div>
                            `).join('')}
                        </div>
                        <p class="text-sm text-gray-500 text-center">Your wardrobe is defined by <span class="text-black font-medium">Noir</span> and <span class="text-black font-medium">Ecru</span>.</p>
                    </div>
                    <div class="px-6 py-8 border-t border-gray-100">
                        <h3 class="brand-title text-2xl italic mb-6">Style Stats</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="bg-soft-gray p-6 text-center">
                                <span class="block text-3xl font-light mb-1">${user.piecesScanned || 0}</span>
                                <span class="text-[10px] uppercase tracking-wider text-gray-400">Items Scanned</span>
                            </div>
                            <div class="bg-soft-gray p-6 text-center">
                                <span class="block text-3xl font-light mb-1">${user.looksCreated || 0}</span>
                                <span class="text-[10px] uppercase tracking-wider text-gray-400">Looks Created</span>
                            </div>
                        </div>
                    </div>
                </main>
                ${Components.bottomNav('home')}
            </div>
        `;
    },

    profile() {
        const user = App.state.user || { name: 'Guest', initials: 'G', email: '', piecesScanned: 0, looksCreated: 0, archetype: 'Not Set' };
        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white pb-24">
                <header class="sticky top-0 z-50 bg-white pt-12 pb-4 px-6">
                    <div class="flex items-center justify-between">
                        <h1 class="brand-logo text-2xl font-medium">Stylistt</h1>
                        <div class="flex gap-4">
                            <button onclick="Router.navigate('/notifications')" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">notifications</span></button>
                            <button onclick="Router.navigate('/settings')" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">settings</span></button>
                        </div>
                    </div>
                </header>
                <div class="px-6 py-8 bg-soft-gray animate-fade-in">
                    <div class="flex items-start justify-between">
                        <div>
                            <h2 class="brand-title text-4xl font-medium mb-1">${user.name}</h2>
                            <p class="text-[10px] uppercase tracking-[0.2em] text-gray-400">Personal Atelier</p>
                        </div>
                        <button onclick="Router.navigate('/edit-profile')" class="w-20 h-20 bg-gray-200 rounded-sm flex items-center justify-center hover:bg-gray-300 transition-colors">
                            <span class="text-2xl font-light text-gray-400">${user.initials}</span>
                        </button>
                    </div>
                    <div class="grid grid-cols-2 gap-4 mt-8">
                        <div class="bg-white p-6 text-center">
                            <span class="block text-4xl font-light mb-1">${user.piecesScanned}</span>
                            <span class="text-[10px] uppercase tracking-[0.2em] text-gray-400">Pieces Scanned</span>
                        </div>
                        <div class="bg-white p-6 text-center">
                            <span class="block text-4xl font-light mb-1">${user.looksCreated}</span>
                            <span class="text-[10px] uppercase tracking-[0.2em] text-gray-400">Looks Created</span>
                        </div>
                    </div>
                </div>
                <div class="flex-1 px-6 py-6">
                    <div class="space-y-0 divide-y divide-gray-100">
                        <button onclick="Router.navigate('/style-dna')" class="w-full flex items-center justify-between py-5 group">
                            <div class="flex items-center gap-4">
                                <span class="material-symbols-outlined text-gray-600 group-hover:text-black transition-colors">tune</span>
                                <span class="text-sm font-medium uppercase tracking-wider group-hover:text-black transition-colors">Style Preferences</span>
                            </div>
                            <span class="material-symbols-outlined text-gray-400">chevron_right</span>
                        </button>
                        <button onclick="Router.navigate('/edit-profile')" class="w-full flex items-center justify-between py-5 group">
                            <div class="flex items-center gap-4">
                                <span class="material-symbols-outlined text-gray-600 group-hover:text-black transition-colors">person</span>
                                <span class="text-sm font-medium uppercase tracking-wider group-hover:text-black transition-colors">Account Details</span>
                            </div>
                            <span class="material-symbols-outlined text-gray-400">chevron_right</span>
                        </button>
                        <button onclick="Router.navigate('/favorites')" class="w-full flex items-center justify-between py-5 group">
                            <div class="flex items-center gap-4">
                                <span class="material-symbols-outlined text-gray-600 group-hover:text-black transition-colors">favorite</span>
                                <span class="text-sm font-medium uppercase tracking-wider group-hover:text-black transition-colors">Saved Items</span>
                            </div>
                            <span class="material-symbols-outlined text-gray-400">chevron_right</span>
                        </button>
                        <button onclick="Router.navigate('/sustainability')" class="w-full flex items-center justify-between py-5 group">
                            <div class="flex items-center gap-4">
                                <span class="material-symbols-outlined text-gray-600 group-hover:text-black transition-colors">eco</span>
                                <span class="text-sm font-medium uppercase tracking-wider group-hover:text-black transition-colors">Sustainability</span>
                            </div>
                            <span class="material-symbols-outlined text-gray-400">chevron_right</span>
                        </button>
                    </div>

                    <!-- Closet Concierge Section -->
                    <div class="mt-8">
                        <h3 class="text-[10px] uppercase tracking-[0.2em] text-gray-400 mb-4">Closet Concierge</h3>
                        ${(() => {
                            const tier = App.state.user?.subscription?.tier || 'free';
                            const tierData = App.data.subscriptionTiers.find(t => t.id === tier);
                            const itemCount = App.state.closetItems?.length || 0;
                            const itemLimit = tierData?.itemLimit || 5;

                            if (tier === 'free') {
                                return `
                                    <div class="bg-soft-gray p-6">
                                        <div class="flex items-start gap-4 mb-4">
                                            <div class="w-12 h-12 bg-black text-white flex items-center justify-center">
                                                <span class="material-symbols-outlined">dry_cleaning</span>
                                            </div>
                                            <div class="flex-1">
                                                <h4 class="font-medium mb-1">Free Tier</h4>
                                                <p class="text-sm text-gray-500">${itemCount} of ${itemLimit} items scanned</p>
                                            </div>
                                        </div>
                                        <div class="h-1 bg-gray-200 mb-4">
                                            <div class="h-full bg-black transition-all" style="width: ${Math.min((itemCount / itemLimit) * 100, 100)}%"></div>
                                        </div>
                                        <p class="text-sm text-gray-600 mb-4">Turn your closet into a premium boutique. A Stylistt Pro visits your home, organizes your wardrobe, and scans everything.</p>
                                        <button onclick="Router.navigate('/transform')" class="w-full bg-black text-white py-3 text-[11px] font-bold uppercase tracking-[0.2em] active:opacity-80 transition-opacity">
                                            Transform My Closet
                                        </button>
                                    </div>
                                `;
                            } else {
                                return `
                                    <div class="bg-soft-gray p-6">
                                        <div class="flex items-start gap-4 mb-4">
                                            <div class="w-12 h-12 bg-accent-gold text-white flex items-center justify-center">
                                                <span class="material-symbols-outlined">workspace_premium</span>
                                            </div>
                                            <div class="flex-1">
                                                <h4 class="font-medium mb-1">${tierData?.name || 'Premium'} Member</h4>
                                                <p class="text-sm text-gray-500">Unlimited items & AI styling</p>
                                            </div>
                                        </div>
                                        <div class="space-y-3 mb-4">
                                            <div class="flex items-center justify-between text-sm">
                                                <span class="text-gray-600">Visits this year</span>
                                                <span class="font-medium">${tierData?.visits || 0} included</span>
                                            </div>
                                            <div class="flex items-center justify-between text-sm">
                                                <span class="text-gray-600">Items scanned</span>
                                                <span class="font-medium">${itemCount} pieces</span>
                                            </div>
                                        </div>
                                        <button onclick="Router.navigate('/book-visit')" class="w-full border border-black py-3 text-[11px] font-bold uppercase tracking-[0.2em] hover:bg-black hover:text-white transition-all">
                                            Schedule Next Visit
                                        </button>
                                    </div>
                                `;
                            }
                        })()}
                    </div>
                </div>
                ${Components.bottomNav('profile')}
            </div>
        `;
    },

    shop() {
        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white pb-24">
                ${Components.header({ subtitle: 'Curated Shop' })}
                <main class="flex-1 overflow-y-auto">
                    <div class="px-6 py-8 text-center animate-fade-in">
                        <h2 class="brand-title text-3xl italic mb-3">Completes Your Look</h2>
                        <p class="text-sm text-gray-500">Pieces hand-picked by our AI stylist to harmonize with your wardrobe.</p>
                    </div>
                    <div class="px-6 mb-8">
                        ${App.data.lookbooks.map((item, i) => `
                            <div class="mb-8 animate-fade-in-up" style="animation-delay: ${i * 0.1}s">
                                <div class="relative aspect-[3/4] bg-gray-100 overflow-hidden magazine-shadow group">
                                    ${i === 0 ? '<div class="absolute top-4 left-4 bg-white px-3 py-1 z-10"><span class="text-[10px] uppercase tracking-wider font-medium">Best Match</span></div>' : ''}
                                    <img src="${item.image}" alt="${item.title}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700">
                                    <button onclick="Toast.show('Added to cart!', 'success')" class="absolute bottom-4 right-4 bg-white/90 p-3 rounded-full active:scale-90 transition-transform"><span class="material-symbols-outlined">add_shopping_cart</span></button>
                                </div>
                                <div class="mt-4">
                                    <p class="text-[10px] uppercase tracking-wider text-gray-400 mb-1">Outerwear</p>
                                    <h3 class="brand-title text-xl italic">${item.title}</h3>
                                    <p class="text-sm font-medium mt-1">$${(Math.random() * 500 + 100).toFixed(0)}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </main>
                ${Components.bottomNav('home')}
            </div>
        `;
    },

    lookbookDetail(params) {
        const look = App.data.lookbooks.find(l => l.id === params.id) || App.data.lookbooks[0];
        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white">
                ${Components.header({ subtitle: 'Lookbook Detail', showBack: true })}
                <main class="flex-1">
                    <div class="aspect-[3/4] bg-gray-100 overflow-hidden animate-fade-in">
                        <img src="${look.image}" alt="${look.title}" class="w-full h-full object-cover">
                    </div>
                    <div class="px-6 py-8 animate-fade-in-up">
                        <div class="inline-block bg-soft-gray px-3 py-1 mb-4">
                            <span class="text-[10px] uppercase tracking-wider">Fall / Winter 2024</span>
                        </div>
                        <h2 class="brand-title text-4xl italic mb-4">The ${look.title.split(' ')[0]}<br>Edit</h2>
                        <p class="text-gray-500 text-sm mb-8">${look.description}</p>
                        <div class="flex gap-4">
                            <button onclick="Toast.show('Added to calendar!', 'success')" class="flex-1 flex items-center justify-center gap-2 py-4 border border-black hover:bg-black hover:text-white transition-all active:scale-[0.98]">
                                <span class="material-symbols-outlined">calendar_today</span>
                                <span class="text-[11px] font-bold uppercase tracking-wider">Add to Calendar</span>
                            </button>
                            <button onclick="App.updateUser({ looksCreated: (App.state.user?.looksCreated || 0) + 1 }); Toast.show('Look saved for today!', 'success')" class="flex-1 flex items-center justify-center gap-2 py-4 bg-black text-white active:scale-[0.98] transition-transform">
                                <span class="material-symbols-outlined">checkroom</span>
                                <span class="text-[11px] font-bold uppercase tracking-wider">Wear Today</span>
                            </button>
                        </div>
                    </div>
                </main>
            </div>
        `;
    },

    settings() {
        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white">
                ${Components.header({ subtitle: 'Settings', showBack: true, rightAction: 'none' })}
                <main class="flex-1 px-6 py-6">
                    <div class="space-y-0 divide-y divide-gray-100">
                        <button onclick="Router.navigate('/edit-profile')" class="w-full flex items-center justify-between py-5">
                            <div class="flex items-center gap-4">
                                <span class="material-symbols-outlined text-gray-600">person</span>
                                <span class="text-sm font-medium">Edit Profile</span>
                            </div>
                            <span class="material-symbols-outlined text-gray-400">chevron_right</span>
                        </button>
                        <button onclick="Router.navigate('/notifications')" class="w-full flex items-center justify-between py-5">
                            <div class="flex items-center gap-4">
                                <span class="material-symbols-outlined text-gray-600">notifications</span>
                                <span class="text-sm font-medium">Notifications</span>
                            </div>
                            <span class="material-symbols-outlined text-gray-400">chevron_right</span>
                        </button>
                        <button onclick="Toast.show('Privacy settings coming soon', 'info')" class="w-full flex items-center justify-between py-5">
                            <div class="flex items-center gap-4">
                                <span class="material-symbols-outlined text-gray-600">lock</span>
                                <span class="text-sm font-medium">Privacy</span>
                            </div>
                            <span class="material-symbols-outlined text-gray-400">chevron_right</span>
                        </button>
                        <button onclick="Toast.show('Help center coming soon', 'info')" class="w-full flex items-center justify-between py-5">
                            <div class="flex items-center gap-4">
                                <span class="material-symbols-outlined text-gray-600">help</span>
                                <span class="text-sm font-medium">Help & Support</span>
                            </div>
                            <span class="material-symbols-outlined text-gray-400">chevron_right</span>
                        </button>
                        <button onclick="Toast.show('About page coming soon', 'info')" class="w-full flex items-center justify-between py-5">
                            <div class="flex items-center gap-4">
                                <span class="material-symbols-outlined text-gray-600">info</span>
                                <span class="text-sm font-medium">About</span>
                            </div>
                            <span class="material-symbols-outlined text-gray-400">chevron_right</span>
                        </button>
                    </div>

                    ${App.state.isLoggedIn ? `
                        <button onclick="App.logout()" class="w-full mt-8 py-4 text-red-500 text-sm font-medium border border-red-200 hover:bg-red-50 transition-colors active:scale-[0.98]">
                            Sign Out
                        </button>
                    ` : ''}

                    <p class="text-center text-xs text-gray-400 mt-8">Stylistt v1.0.0</p>
                </main>
            </div>
        `;
    },

    notifications() {
        const notifications = [
            { icon: 'auto_awesome', title: 'New outfit suggestion', message: 'Based on your recent scan, we have a perfect look for you.', time: '2h ago', unread: true },
            { icon: 'favorite', title: 'Someone saved your look', message: 'Your Weekend Chic look is getting popular!', time: '5h ago', unread: true },
            { icon: 'eco', title: 'Sustainability milestone', message: 'You\'ve reduced your fashion footprint by 15%!', time: '1d ago', unread: false },
            { icon: 'checkroom', title: 'New item added', message: 'Your Classic Blazer has been added to your closet.', time: '2d ago', unread: false }
        ];

        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white">
                ${Components.header({ subtitle: 'Notifications', showBack: true, rightAction: 'none' })}
                <main class="flex-1">
                    ${notifications.length > 0 ? `
                        <div class="divide-y divide-gray-100">
                            ${notifications.map(n => `
                                <div class="px-6 py-5 flex gap-4 ${n.unread ? 'bg-soft-gray/50' : ''} hover:bg-soft-gray transition-colors cursor-pointer">
                                    <div class="w-10 h-10 bg-black text-white rounded-full flex items-center justify-center flex-shrink-0">
                                        <span class="material-symbols-outlined text-[20px]">${n.icon}</span>
                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <div class="flex items-start justify-between gap-2">
                                            <h4 class="font-medium text-sm">${n.title}</h4>
                                            <span class="text-[10px] text-gray-400 whitespace-nowrap">${n.time}</span>
                                        </div>
                                        <p class="text-xs text-gray-500 mt-1">${n.message}</p>
                                    </div>
                                    ${n.unread ? '<div class="w-2 h-2 bg-accent-gold rounded-full mt-2"></div>' : ''}
                                </div>
                            `).join('')}
                        </div>
                    ` : `
                        <div class="flex flex-col items-center justify-center py-16 text-center">
                            <span class="material-symbols-outlined text-[48px] text-gray-300 mb-4">notifications_off</span>
                            <h3 class="brand-title text-xl italic mb-2">No notifications</h3>
                            <p class="text-sm text-gray-500">You're all caught up!</p>
                        </div>
                    `}
                </main>
            </div>
        `;
    },

    editProfile() {
        const user = App.state.user || {};
        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white">
                ${Components.header({ subtitle: 'Edit Profile', showBack: true, rightAction: 'none' })}
                <main class="flex-1 px-6 py-6">
                    <div class="flex justify-center mb-8">
                        <div class="relative">
                            <div class="w-24 h-24 bg-soft-gray rounded-full flex items-center justify-center">
                                <span class="text-3xl font-light text-gray-400">${user.initials || 'ST'}</span>
                            </div>
                            <button class="absolute bottom-0 right-0 w-8 h-8 bg-black text-white rounded-full flex items-center justify-center">
                                <span class="material-symbols-outlined text-[16px]">edit</span>
                            </button>
                        </div>
                    </div>

                    <form id="edit-profile-form" class="space-y-4">
                        <div>
                            <label class="text-[10px] uppercase tracking-wider text-gray-400 mb-2 block">Full Name</label>
                            ${Components.inputField({ type: 'text', name: 'name', placeholder: 'Your name', value: user.name || '' })}
                        </div>
                        <div>
                            <label class="text-[10px] uppercase tracking-wider text-gray-400 mb-2 block">Email</label>
                            ${Components.inputField({ type: 'email', name: 'email', placeholder: 'Your email', value: user.email || '' })}
                        </div>
                        <div>
                            <label class="text-[10px] uppercase tracking-wider text-gray-400 mb-2 block">Style Archetype</label>
                            <div class="py-4 px-4 bg-soft-gray text-sm">${user.archetype || 'Not set'}</div>
                        </div>

                        <button type="submit" class="w-full bg-black text-white py-4 text-[11px] font-bold uppercase tracking-[0.2em] mt-6 active:scale-[0.98] transition-transform">
                            Save Changes
                        </button>
                    </form>
                </main>
            </div>
        `;

        document.getElementById('edit-profile-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const form = e.target;
            const name = form.name.value;
            const email = form.email.value;

            App.updateUser({
                name,
                email,
                initials: name.substring(0, 2).toUpperCase()
            });

            Toast.show('Profile updated!', 'success');
            Router.navigate('/profile');
        });
    },

    favorites() {
        const favoriteItems = App.data.lookbooks.filter(l => App.isFavorite(l.id));

        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white pb-24">
                ${Components.header({ subtitle: 'Saved Items', showBack: true })}
                <main class="flex-1 px-6 py-6">
                    ${favoriteItems.length > 0 ? `
                        <div class="grid grid-cols-2 gap-4">
                            ${favoriteItems.map(item => `
                                <div class="animate-fade-in-up cursor-pointer" onclick="Router.navigate('/lookbook/${item.id}')">
                                    <div class="relative bg-gray-100 aspect-square mb-3 overflow-hidden group">
                                        <img src="${item.image}" alt="${item.title}" class="w-full h-full object-cover group-hover:scale-105 transition-transform">
                                        <button onclick="event.stopPropagation(); App.toggleFavorite('${item.id}')" class="absolute top-2 right-2 w-8 h-8 bg-white/90 rounded-full flex items-center justify-center">
                                            <span class="material-symbols-outlined text-[16px] filled text-accent-gold">favorite</span>
                                        </button>
                                    </div>
                                    <p class="text-xs font-medium">${item.title}</p>
                                </div>
                            `).join('')}
                        </div>
                    ` : `
                        <div class="flex flex-col items-center justify-center py-16 text-center">
                            <span class="material-symbols-outlined text-[48px] text-gray-300 mb-4">favorite_border</span>
                            <h3 class="brand-title text-xl italic mb-2">No saved items</h3>
                            <p class="text-sm text-gray-500 mb-6">Start exploring and save looks you love.</p>
                            <button onclick="Router.navigate('/lookbooks')" class="bg-black text-white px-8 py-3 text-[11px] font-bold uppercase tracking-[0.2em]">
                                Browse Lookbooks
                            </button>
                        </div>
                    `}
                </main>
                ${Components.bottomNav('profile')}
            </div>
        `;
    },

    sustainability() {
        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white pb-24">
                ${Components.header({ subtitle: 'Sustainability', showBack: true })}
                <main class="flex-1 overflow-y-auto">
                    <div class="px-6 py-12 text-center bg-gradient-to-b from-green-50 to-white animate-fade-in">
                        <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="material-symbols-outlined text-[40px] text-green-600">eco</span>
                        </div>
                        <h2 class="brand-title text-3xl italic mb-2">Your Impact</h2>
                        <p class="text-sm text-gray-500">Building a more sustainable wardrobe, one piece at a time.</p>
                    </div>

                    <div class="px-6 py-8 animate-fade-in-up">
                        <div class="grid grid-cols-2 gap-4 mb-8">
                            <div class="bg-soft-gray p-6 text-center">
                                <span class="block text-4xl font-light text-green-600 mb-1">85%</span>
                                <span class="text-[10px] uppercase tracking-wider text-gray-400">Wardrobe Utilization</span>
                            </div>
                            <div class="bg-soft-gray p-6 text-center">
                                <span class="block text-4xl font-light text-green-600 mb-1">12</span>
                                <span class="text-[10px] uppercase tracking-wider text-gray-400">Outfits Created</span>
                            </div>
                        </div>

                        <div class="mb-8">
                            <h3 class="brand-title text-xl italic mb-4">Sustainability Score</h3>
                            <div class="h-3 bg-gray-200 rounded-full overflow-hidden">
                                <div class="h-full bg-gradient-to-r from-green-400 to-green-600 rounded-full" style="width: 72%"></div>
                            </div>
                            <div class="flex justify-between mt-2">
                                <span class="text-xs text-gray-400">0</span>
                                <span class="text-sm font-medium text-green-600">72/100</span>
                                <span class="text-xs text-gray-400">100</span>
                            </div>
                        </div>

                        <div class="space-y-4">
                            <h3 class="brand-title text-xl italic">Tips to Improve</h3>
                            <div class="flex items-start gap-4 p-4 bg-soft-gray">
                                <span class="material-symbols-outlined text-green-600">lightbulb</span>
                                <div>
                                    <h4 class="font-medium text-sm mb-1">Mix & Match More</h4>
                                    <p class="text-xs text-gray-500">Try pairing your blazer with different bottoms.</p>
                                </div>
                            </div>
                            <div class="flex items-start gap-4 p-4 bg-soft-gray">
                                <span class="material-symbols-outlined text-green-600">recycling</span>
                                <div>
                                    <h4 class="font-medium text-sm mb-1">Consider Quality Over Quantity</h4>
                                    <p class="text-xs text-gray-500">Invest in timeless pieces that last longer.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
                ${Components.bottomNav('profile')}
            </div>
        `;
    },

    itemDetail(params) {
        const item = App.state.closetItems.find(i => i.id === params.id);
        if (!item) {
            Toast.show('Item not found', 'error');
            Router.navigate('/closet');
            return;
        }

        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white">
                ${Components.header({ subtitle: 'Item Detail', showBack: true, rightAction: 'none' })}
                <main class="flex-1">
                    <div class="aspect-square bg-gray-100 overflow-hidden">
                        ${item.image ? `<img src="${item.image}" alt="${item.name}" class="w-full h-full object-cover">` : `
                            <div class="w-full h-full flex items-center justify-center">
                                <span class="material-symbols-outlined text-[80px] text-gray-300">checkroom</span>
                            </div>
                        `}
                    </div>
                    <div class="px-6 py-6 animate-fade-in-up">
                        <p class="text-[10px] uppercase tracking-wider text-gray-400 mb-1">${item.brand || 'Unknown Brand'}</p>
                        <h2 class="brand-title text-2xl italic mb-4">${item.name}</h2>

                        <div class="space-y-4 mb-8">
                            <div class="flex justify-between py-3 border-b border-gray-100">
                                <span class="text-sm text-gray-400">Category</span>
                                <span class="text-sm font-medium">${item.category || 'Uncategorized'}</span>
                            </div>
                            <div class="flex justify-between py-3 border-b border-gray-100">
                                <span class="text-sm text-gray-400">Material</span>
                                <span class="text-sm font-medium">${item.material || 'Unknown'}</span>
                            </div>
                            <div class="flex justify-between py-3 border-b border-gray-100">
                                <span class="text-sm text-gray-400">Color</span>
                                <span class="text-sm font-medium">${item.color || 'Unknown'}</span>
                            </div>
                            <div class="flex justify-between py-3 border-b border-gray-100">
                                <span class="text-sm text-gray-400">Added</span>
                                <span class="text-sm font-medium">${new Date(item.addedAt).toLocaleDateString()}</span>
                            </div>
                        </div>

                        <div class="flex gap-4">
                            <button onclick="Router.navigate('/ai-outfit')" class="flex-1 bg-black text-white py-4 text-[11px] font-bold uppercase tracking-[0.2em] active:scale-[0.98] transition-transform">
                                Create Outfit
                            </button>
                            <button onclick="if(confirm('Remove this item?')) { App.removeFromCloset('${item.id}'); Router.navigate('/closet'); }" class="py-4 px-6 border border-red-200 text-red-500 active:scale-[0.98] transition-transform">
                                <span class="material-symbols-outlined">delete</span>
                            </button>
                        </div>
                    </div>
                </main>
            </div>
        `;
    },

    // ============ ORGANIZERR CLIENT SCREENS ============

    organizerr() {
        const user = App.state.user || {};
        const sub = user.subscription || { tier: 'free' };
        const tierData = App.data.subscriptionTiers.find(t => t.id === sub.tier);

        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white pb-24">
                <header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md pt-12 pb-4 px-6 border-b border-gray-50">
                    <div class="flex items-center justify-between">
                        <button onclick="Screens.showMenu()" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">menu</span></button>
                        <div class="text-center">
                            <h1 class="brand-logo text-2xl font-medium">Organizerr</h1>
                            <p class="text-[10px] uppercase tracking-[0.3em] text-gray-400">Closet Service</p>
                        </div>
                        <div class="w-10"></div>
                    </div>
                </header>
                <main class="flex-1 overflow-y-auto px-6 pt-6">
                    <!-- Subscription Status Card -->
                    <div class="animate-fade-in mb-8">
                        ${sub.tier !== 'none' ? `
                            <div class="bg-black text-white p-6 mb-4">
                                <p class="text-[10px] uppercase tracking-[0.3em] text-gray-400 mb-2">Your Plan</p>
                                <h2 class="brand-title text-3xl italic mb-4">${tierData?.name || 'Active'}</h2>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-gray-400">Visits Remaining</span>
                                        <span class="font-medium">${sub.visitsRemaining} of ${tierData?.visits || 0}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-400">Renews</span>
                                        <span class="font-medium">${sub.expiresAt ? new Date(sub.expiresAt).toLocaleDateString() : 'N/A'}</span>
                                    </div>
                                </div>
                                <button onclick="Router.navigate('/organizerr/plans')" class="w-full mt-6 py-3 border border-white text-[11px] font-bold uppercase tracking-wider hover:bg-white hover:text-black transition-all">
                                    Manage Plan
                                </button>
                            </div>
                        ` : `
                            <div class="bg-soft-gray p-6 mb-4">
                                <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center mb-4 mx-auto">
                                    <span class="material-symbols-outlined text-[32px] text-accent-gold">workspace_premium</span>
                                </div>
                                <h2 class="brand-title text-2xl italic text-center mb-2">Elevate Your Closet</h2>
                                <p class="text-sm text-gray-500 text-center mb-6">Professional organization services to transform your wardrobe.</p>
                                <button onclick="Router.navigate('/organizerr/plans')" class="w-full bg-black text-white py-4 text-[11px] font-bold uppercase tracking-[0.2em]">
                                    View Plans
                                </button>
                            </div>
                        `}
                    </div>

                    <!-- Quick Actions -->
                    <div class="animate-fade-in-up mb-8" style="animation-delay: 0.1s">
                        <h3 class="text-[10px] uppercase tracking-[0.2em] text-gray-400 mb-4">Quick Actions</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <button onclick="Router.navigate('/organizerr/book')" class="bg-soft-gray p-6 flex flex-col items-center justify-center gap-3 hover:bg-gray-100 transition-colors ${sub.tier === 'none' ? 'opacity-50' : ''}">
                                <span class="material-symbols-outlined text-[28px]">calendar_month</span>
                                <span class="text-[11px] font-bold uppercase tracking-wider">Book Visit</span>
                            </button>
                            <button onclick="Router.navigate('/organizerr/visits')" class="bg-soft-gray p-6 flex flex-col items-center justify-center gap-3 hover:bg-gray-100 transition-colors">
                                <span class="material-symbols-outlined text-[28px]">history</span>
                                <span class="text-[11px] font-bold uppercase tracking-wider">My Visits</span>
                            </button>
                            <button onclick="Router.navigate('/organizerr/closet')" class="bg-soft-gray p-6 flex flex-col items-center justify-center gap-3 hover:bg-gray-100 transition-colors">
                                <span class="material-symbols-outlined text-[28px]">checkroom</span>
                                <span class="text-[11px] font-bold uppercase tracking-wider">View Closet</span>
                            </button>
                            <button onclick="Router.navigate('/organizerr/organizers')" class="bg-soft-gray p-6 flex flex-col items-center justify-center gap-3 hover:bg-gray-100 transition-colors">
                                <span class="material-symbols-outlined text-[28px]">person_search</span>
                                <span class="text-[11px] font-bold uppercase tracking-wider">Organizers</span>
                            </button>
                        </div>
                    </div>

                    <!-- Connected Organizers -->
                    ${(user.connectedOrganizers || []).length > 0 ? `
                        <div class="animate-fade-in-up mb-8" style="animation-delay: 0.2s">
                            <h3 class="text-[10px] uppercase tracking-[0.2em] text-gray-400 mb-4">Your Organizers</h3>
                            <div class="space-y-3">
                                ${(user.connectedOrganizers || []).map(orgId => {
                                    const org = App.data.mockOrganizers.find(o => o.id === orgId) || { name: 'Organizer', initials: 'OR' };
                                    return `
                                        <div class="bg-soft-gray p-4 flex items-center gap-4">
                                            <div class="w-12 h-12 bg-black text-white rounded-full flex items-center justify-center flex-shrink-0">
                                                <span class="text-sm font-medium">${org.initials}</span>
                                            </div>
                                            <div class="flex-1">
                                                <p class="font-medium text-sm">${org.name}</p>
                                                <p class="text-xs text-gray-500">${org.specialty || 'Professional Organizer'}</p>
                                            </div>
                                            <button class="text-gray-400 hover:text-black">
                                                <span class="material-symbols-outlined">chat</span>
                                            </button>
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                        </div>
                    ` : ''}
                </main>
                ${Components.organizerrNav('home')}
            </div>
        `;
    },

    organizerrPlans() {
        const user = App.state.user || {};
        const currentTier = user.subscription?.tier || 'none';

        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white pb-24">
                <header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md pt-12 pb-4 px-6 border-b border-gray-50">
                    <div class="flex items-center justify-between">
                        <button onclick="Router.navigate('/organizerr')" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">arrow_back</span></button>
                        <div class="text-center">
                            <h1 class="brand-logo text-2xl font-medium">Organizerr</h1>
                            <p class="text-[10px] uppercase tracking-[0.3em] text-gray-400">Choose Your Plan</p>
                        </div>
                        <div class="w-10"></div>
                    </div>
                </header>
                <main class="flex-1 overflow-y-auto px-6 pt-6 pb-8">
                    <div class="text-center mb-8 animate-fade-in">
                        <h2 class="brand-title text-3xl italic mb-2">Transform Your Wardrobe</h2>
                        <p class="text-sm text-gray-500">Professional organization meets personalized styling.</p>
                    </div>

                    <div class="space-y-6">
                        ${App.data.subscriptionTiers.map((tier, i) => `
                            <div class="animate-fade-in-up" style="animation-delay: ${i * 0.1}s">
                                ${Components.subscriptionCard(tier, currentTier === tier.id)}
                            </div>
                        `).join('')}
                    </div>

                    <p class="text-center text-xs text-gray-400 mt-8">
                        All plans auto-renew annually. Cancel anytime.
                    </p>
                </main>
                ${Components.organizerrNav('home')}
            </div>
        `;
    },

    organizerrBook() {
        const user = App.state.user || {};
        const sub = user.subscription || { tier: 'free' };
        const organizers = App.data.mockOrganizers || [];

        // Generate next 14 days for date selection
        const dates = [];
        for (let i = 1; i <= 14; i++) {
            const d = new Date();
            d.setDate(d.getDate() + i);
            dates.push(d);
        }

        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white pb-24">
                <header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md pt-12 pb-4 px-6 border-b border-gray-50">
                    <div class="flex items-center justify-between">
                        <button onclick="Router.navigate('/organizerr')" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">arrow_back</span></button>
                        <div class="text-center">
                            <h1 class="brand-logo text-2xl font-medium">Organizerr</h1>
                            <p class="text-[10px] uppercase tracking-[0.3em] text-gray-400">Book a Visit</p>
                        </div>
                        <div class="w-10"></div>
                    </div>
                </header>
                <main class="flex-1 overflow-y-auto px-6 pt-6">
                    ${sub.tier === 'none' ? `
                        <div class="text-center py-12 animate-fade-in">
                            <div class="w-20 h-20 bg-soft-gray rounded-full flex items-center justify-center mx-auto mb-6">
                                <span class="material-symbols-outlined text-[40px] text-gray-400">lock</span>
                            </div>
                            <h2 class="brand-title text-2xl italic mb-2">Subscribe to Book</h2>
                            <p class="text-sm text-gray-500 mb-6">Choose a plan to start booking organizer visits.</p>
                            <button onclick="Router.navigate('/organizerr/plans')" class="bg-black text-white px-8 py-4 text-[11px] font-bold uppercase tracking-[0.2em]">
                                View Plans
                            </button>
                        </div>
                    ` : sub.visitsRemaining <= 0 ? `
                        <div class="text-center py-12 animate-fade-in">
                            <div class="w-20 h-20 bg-soft-gray rounded-full flex items-center justify-center mx-auto mb-6">
                                <span class="material-symbols-outlined text-[40px] text-gray-400">event_busy</span>
                            </div>
                            <h2 class="brand-title text-2xl italic mb-2">No Visits Remaining</h2>
                            <p class="text-sm text-gray-500 mb-6">Upgrade your plan for additional organizer visits.</p>
                            <button onclick="Router.navigate('/organizerr/plans')" class="bg-black text-white px-8 py-4 text-[11px] font-bold uppercase tracking-[0.2em]">
                                Upgrade Plan
                            </button>
                        </div>
                    ` : `
                        <div class="animate-fade-in">
                            <div class="bg-soft-gray p-4 mb-6 flex items-center justify-between">
                                <span class="text-sm text-gray-600">Visits Available</span>
                                <span class="font-bold text-lg">${sub.visitsRemaining}</span>
                            </div>

                            <!-- Select Organizer -->
                            <div class="mb-8">
                                <h3 class="text-[10px] uppercase tracking-[0.2em] text-gray-400 mb-4">Select Organizer</h3>
                                <div class="space-y-3">
                                    ${organizers.map((org, i) => `
                                        <label class="block cursor-pointer">
                                            <input type="radio" name="organizer" value="${org.id}" class="hidden peer" ${i === 0 ? 'checked' : ''}>
                                            <div class="bg-soft-gray p-4 flex items-center gap-4 border-2 border-transparent peer-checked:border-black transition-all">
                                                <div class="w-12 h-12 bg-black text-white rounded-full flex items-center justify-center flex-shrink-0">
                                                    <span class="text-sm font-medium">${org.initials}</span>
                                                </div>
                                                <div class="flex-1">
                                                    <p class="font-medium text-sm">${org.name}</p>
                                                    <p class="text-xs text-gray-500">${org.specialty}</p>
                                                </div>
                                                <div class="text-right">
                                                    <div class="flex items-center gap-1">
                                                        <span class="material-symbols-outlined text-accent-gold text-[16px]">star</span>
                                                        <span class="text-sm font-medium">${org.rating}</span>
                                                    </div>
                                                    <p class="text-[10px] text-gray-400">${org.reviews} reviews</p>
                                                </div>
                                            </div>
                                        </label>
                                    `).join('')}
                                </div>
                            </div>

                            <!-- Select Date -->
                            <div class="mb-8">
                                <h3 class="text-[10px] uppercase tracking-[0.2em] text-gray-400 mb-4">Select Date</h3>
                                <div class="flex gap-3 overflow-x-auto pb-4">
                                    ${dates.slice(0, 7).map((d, i) => `
                                        <label class="cursor-pointer flex-shrink-0">
                                            <input type="radio" name="date" value="${d.toISOString()}" class="hidden peer" ${i === 0 ? 'checked' : ''}>
                                            <div class="w-16 py-4 bg-soft-gray text-center border-2 border-transparent peer-checked:border-black peer-checked:bg-black peer-checked:text-white transition-all">
                                                <p class="text-[10px] uppercase">${d.toLocaleDateString('en-US', { weekday: 'short' })}</p>
                                                <p class="text-xl font-bold">${d.getDate()}</p>
                                            </div>
                                        </label>
                                    `).join('')}
                                </div>
                            </div>

                            <!-- Select Time -->
                            <div class="mb-8">
                                <h3 class="text-[10px] uppercase tracking-[0.2em] text-gray-400 mb-4">Select Time</h3>
                                <div class="grid grid-cols-3 gap-3">
                                    ${['9:00 AM', '10:00 AM', '11:00 AM', '1:00 PM', '2:00 PM', '3:00 PM'].map((time, i) => `
                                        <label class="cursor-pointer">
                                            <input type="radio" name="time" value="${time}" class="hidden peer" ${i === 0 ? 'checked' : ''}>
                                            <div class="py-3 bg-soft-gray text-center text-sm border-2 border-transparent peer-checked:border-black peer-checked:bg-black peer-checked:text-white transition-all">
                                                ${time}
                                            </div>
                                        </label>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                    `}
                </main>
                ${sub.tier !== 'none' && sub.visitsRemaining > 0 ? `
                    <div class="fixed bottom-36 left-0 right-0 max-w-[430px] mx-auto bg-white/95 backdrop-blur-sm border-t border-gray-100 p-6 z-40">
                        <button onclick="Screens.confirmBooking()" class="w-full bg-black text-white py-4 text-[11px] font-bold uppercase tracking-[0.2em] active:scale-[0.98] transition-transform">
                            Confirm Booking
                        </button>
                    </div>
                ` : ''}
                ${Components.organizerrNav('book')}
            </div>
        `;
    },

    confirmBooking() {
        const organizer = document.querySelector('input[name="organizer"]:checked')?.value;
        const date = document.querySelector('input[name="date"]:checked')?.value;
        const time = document.querySelector('input[name="time"]:checked')?.value;

        if (organizer && date && time) {
            const success = App.bookVisit(organizer, date, time);
            if (success) {
                Toast.show('Visit booked successfully!', 'success');
                Router.navigate('/organizerr/visits');
            }
        } else {
            Toast.show('Please select all options', 'error');
        }
    },

    organizerrVisits() {
        const visits = App.getClientVisits();
        const upcoming = visits.filter(v => v.status === 'scheduled');
        const past = visits.filter(v => v.status === 'completed');

        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white pb-24">
                <header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md pt-12 pb-4 px-6 border-b border-gray-50">
                    <div class="flex items-center justify-between">
                        <button onclick="Router.navigate('/organizerr')" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">arrow_back</span></button>
                        <div class="text-center">
                            <h1 class="brand-logo text-2xl font-medium">Organizerr</h1>
                            <p class="text-[10px] uppercase tracking-[0.3em] text-gray-400">My Visits</p>
                        </div>
                        <div class="w-10"></div>
                    </div>
                </header>
                <main class="flex-1 overflow-y-auto px-6 pt-6">
                    ${visits.length === 0 ? `
                        <div class="text-center py-12 animate-fade-in">
                            <div class="w-20 h-20 bg-soft-gray rounded-full flex items-center justify-center mx-auto mb-6">
                                <span class="material-symbols-outlined text-[40px] text-gray-400">event</span>
                            </div>
                            <h2 class="brand-title text-2xl italic mb-2">No Visits Yet</h2>
                            <p class="text-sm text-gray-500 mb-6">Book your first organizer visit to get started.</p>
                            <button onclick="Router.navigate('/organizerr/book')" class="bg-black text-white px-8 py-4 text-[11px] font-bold uppercase tracking-[0.2em]">
                                Book a Visit
                            </button>
                        </div>
                    ` : `
                        ${upcoming.length > 0 ? `
                            <div class="mb-8 animate-fade-in">
                                <h3 class="text-[10px] uppercase tracking-[0.2em] text-gray-400 mb-4">Upcoming</h3>
                                <div class="space-y-4">
                                    ${upcoming.map(visit => {
                                        const org = App.data.mockOrganizers.find(o => o.id === visit.organizerId) || { name: 'Organizer', initials: 'OR' };
                                        const date = new Date(visit.scheduledDate);
                                        return `
                                            <div class="bg-soft-gray p-4">
                                                <div class="flex items-start gap-4 mb-4">
                                                    <div class="w-12 h-12 bg-black text-white rounded-full flex items-center justify-center flex-shrink-0">
                                                        <span class="text-sm font-medium">${org.initials}</span>
                                                    </div>
                                                    <div class="flex-1">
                                                        <p class="font-medium text-sm">${org.name}</p>
                                                        <p class="text-xs text-gray-500">${org.specialty || 'Professional Organizer'}</p>
                                                    </div>
                                                    <span class="px-2 py-1 bg-green-100 text-green-700 text-[10px] uppercase tracking-wider font-medium">Scheduled</span>
                                                </div>
                                                <div class="flex items-center gap-4 text-sm">
                                                    <div class="flex items-center gap-2">
                                                        <span class="material-symbols-outlined text-[18px] text-gray-400">calendar_today</span>
                                                        <span>${date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' })}</span>
                                                    </div>
                                                    <div class="flex items-center gap-2">
                                                        <span class="material-symbols-outlined text-[18px] text-gray-400">schedule</span>
                                                        <span>${visit.time || '10:00 AM'}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        `;
                                    }).join('')}
                                </div>
                            </div>
                        ` : ''}

                        ${past.length > 0 ? `
                            <div class="animate-fade-in-up" style="animation-delay: 0.1s">
                                <h3 class="text-[10px] uppercase tracking-[0.2em] text-gray-400 mb-4">Past Visits</h3>
                                <div class="space-y-4">
                                    ${past.map(visit => {
                                        const org = App.data.mockOrganizers.find(o => o.id === visit.organizerId) || { name: 'Organizer', initials: 'OR' };
                                        const date = new Date(visit.scheduledDate);
                                        return `
                                            <div class="bg-soft-gray p-4 opacity-70">
                                                <div class="flex items-start gap-4">
                                                    <div class="w-10 h-10 bg-gray-400 text-white rounded-full flex items-center justify-center flex-shrink-0">
                                                        <span class="text-xs font-medium">${org.initials}</span>
                                                    </div>
                                                    <div class="flex-1">
                                                        <p class="font-medium text-sm">${org.name}</p>
                                                        <p class="text-xs text-gray-500">${date.toLocaleDateString()}</p>
                                                    </div>
                                                    <span class="px-2 py-1 bg-gray-200 text-gray-600 text-[10px] uppercase tracking-wider font-medium">Completed</span>
                                                </div>
                                            </div>
                                        `;
                                    }).join('')}
                                </div>
                            </div>
                        ` : ''}
                    `}
                </main>
                ${Components.organizerrNav('visits')}
            </div>
        `;
    },

    organizerrCloset() {
        const cats = App.data.categories;
        const filter = App.state.closetFilter;
        const items = App.state.closetItems.filter(item => filter === 'All Items' || item.category === filter);

        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white pb-24">
                <header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md pt-12 pb-4 px-6 border-b border-gray-50">
                    <div class="flex items-center justify-between">
                        <button onclick="Router.navigate('/organizerr')" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">arrow_back</span></button>
                        <div class="text-center">
                            <h1 class="brand-logo text-2xl font-medium">Organizerr</h1>
                            <p class="text-[10px] uppercase tracking-[0.3em] text-gray-400">My Closet</p>
                        </div>
                        <div class="w-10"></div>
                    </div>
                </header>
                <div class="sticky top-[88px] z-40 bg-white border-b border-gray-100">
                    <div class="flex gap-6 px-6 overflow-x-auto">
                        ${cats.map(c => `
                            <button onclick="App.setClosetFilter('${c}'); Screens.organizerrCloset();" class="py-4 text-sm whitespace-nowrap transition-colors ${filter===c?'text-black font-medium border-b-2 border-black':'text-gray-400 hover:text-gray-600'}">${c}</button>
                        `).join('')}
                    </div>
                </div>
                <main class="flex-1 p-6">
                    ${items.length > 0 ? `
                        <p class="text-xs text-gray-400 mb-4">${items.length} items</p>
                        <div class="grid grid-cols-2 gap-4">
                            ${items.map(item => `
                                <div class="group cursor-pointer" onclick="Router.navigate('/item/${item.id}')">
                                    <div class="relative aspect-square bg-gray-100 overflow-hidden mb-3">
                                        ${item.image ? `<img src="${item.image}" alt="${item.name}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">` : `
                                            <div class="w-full h-full flex items-center justify-center">
                                                <span class="material-symbols-outlined text-[48px] text-gray-300">checkroom</span>
                                            </div>
                                        `}
                                        ${item.addedBy && item.addedBy !== App.state.user?.email ? `
                                            <span class="absolute top-2 left-2 px-2 py-1 bg-accent-gold text-white text-[9px] uppercase tracking-wider">Added by organizer</span>
                                        ` : ''}
                                    </div>
                                    <p class="text-[10px] text-gray-400 uppercase tracking-wider">${item.brand || item.category}</p>
                                    <p class="text-sm font-medium truncate">${item.name}</p>
                                </div>
                            `).join('')}
                        </div>
                    ` : `
                        <div class="text-center py-12">
                            <div class="w-20 h-20 bg-soft-gray rounded-full flex items-center justify-center mx-auto mb-6">
                                <span class="material-symbols-outlined text-[40px] text-gray-400">checkroom</span>
                            </div>
                            <h3 class="brand-title text-xl italic mb-2">Your Closet is Empty</h3>
                            <p class="text-sm text-gray-500 mb-6">Start scanning items or have your organizer add them.</p>
                            <button onclick="App.switchApp('stylistt'); Router.navigate('/scan');" class="bg-black text-white px-8 py-4 text-[11px] font-bold uppercase tracking-[0.2em]">
                                Scan Items
                            </button>
                        </div>
                    `}
                </main>
                ${Components.organizerrNav('closet')}
            </div>
        `;
    },

    organizerrOrganizers() {
        const user = App.state.user || {};
        const connectedOrgs = (user.connectedOrganizers || []).map(id =>
            App.data.mockOrganizers.find(o => o.id === id)
        ).filter(Boolean);
        const availableOrgs = App.data.mockOrganizers.filter(o =>
            !(user.connectedOrganizers || []).includes(o.id)
        );

        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white pb-24">
                <header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md pt-12 pb-4 px-6 border-b border-gray-50">
                    <div class="flex items-center justify-between">
                        <button onclick="Router.navigate('/organizerr')" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">arrow_back</span></button>
                        <div class="text-center">
                            <h1 class="brand-logo text-2xl font-medium">Organizerr</h1>
                            <p class="text-[10px] uppercase tracking-[0.3em] text-gray-400">Organizers</p>
                        </div>
                        <div class="w-10"></div>
                    </div>
                </header>
                <main class="flex-1 overflow-y-auto px-6 pt-6">
                    <!-- Your Invite Code -->
                    <div class="bg-black text-white p-6 mb-8 animate-fade-in">
                        <p class="text-[10px] uppercase tracking-[0.3em] text-gray-400 mb-2">Your Invite Code</p>
                        <div class="flex items-center justify-between">
                            <span class="font-mono text-2xl tracking-wider">${user.inviteCode || 'N/A'}</span>
                            <button onclick="navigator.clipboard.writeText('${user.inviteCode || ''}'); Toast.show('Code copied!', 'success');" class="p-2 hover:bg-white/10 rounded transition-colors">
                                <span class="material-symbols-outlined">content_copy</span>
                            </button>
                        </div>
                        <p class="text-xs text-gray-400 mt-2">Share this code with your organizer to connect.</p>
                    </div>

                    <!-- Connected Organizers -->
                    ${connectedOrgs.length > 0 ? `
                        <div class="mb-8 animate-fade-in-up" style="animation-delay: 0.1s">
                            <h3 class="text-[10px] uppercase tracking-[0.2em] text-gray-400 mb-4">Connected Organizers</h3>
                            <div class="space-y-3">
                                ${connectedOrgs.map(org => `
                                    <div class="bg-soft-gray p-4 flex items-center gap-4">
                                        <div class="w-12 h-12 bg-black text-white rounded-full flex items-center justify-center flex-shrink-0">
                                            <span class="text-sm font-medium">${org.initials}</span>
                                        </div>
                                        <div class="flex-1">
                                            <p class="font-medium text-sm">${org.name}</p>
                                            <p class="text-xs text-gray-500">${org.specialty}</p>
                                        </div>
                                        <div class="flex items-center gap-1">
                                            <span class="material-symbols-outlined text-accent-gold text-[16px]">star</span>
                                            <span class="text-sm font-medium">${org.rating}</span>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}

                    <!-- Find Organizers -->
                    <div class="animate-fade-in-up" style="animation-delay: 0.2s">
                        <h3 class="text-[10px] uppercase tracking-[0.2em] text-gray-400 mb-4">${connectedOrgs.length > 0 ? 'Find More Organizers' : 'Available Organizers'}</h3>
                        <div class="space-y-3">
                            ${availableOrgs.map(org => `
                                <div class="bg-soft-gray p-4">
                                    <div class="flex items-center gap-4 mb-4">
                                        <div class="w-12 h-12 bg-gray-400 text-white rounded-full flex items-center justify-center flex-shrink-0">
                                            <span class="text-sm font-medium">${org.initials}</span>
                                        </div>
                                        <div class="flex-1">
                                            <p class="font-medium text-sm">${org.name}</p>
                                            <p class="text-xs text-gray-500">${org.specialty}</p>
                                        </div>
                                        <div class="text-right">
                                            <div class="flex items-center gap-1">
                                                <span class="material-symbols-outlined text-accent-gold text-[16px]">star</span>
                                                <span class="text-sm font-medium">${org.rating}</span>
                                            </div>
                                            <p class="text-[10px] text-gray-400">${org.reviews} reviews</p>
                                        </div>
                                    </div>
                                    <button onclick="App.connectOrganizer('${org.id}'); Screens.organizerrOrganizers();" class="w-full py-3 border border-black text-[11px] font-bold uppercase tracking-wider hover:bg-black hover:text-white transition-all">
                                        Connect
                                    </button>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </main>
                ${Components.organizerrNav('account')}
            </div>
        `;
    },

    // ============ ORGANIZER SCREENS ============

    organizerSignup() {
        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white">
                <header class="flex items-center justify-between px-6 pt-12 pb-4">
                    <button onclick="Router.navigate('/signup')" class="active:scale-90 transition-transform">
                        <span class="material-symbols-outlined">arrow_back</span>
                    </button>
                    <h1 class="brand-logo text-2xl font-medium">Organizerr</h1>
                    <div class="w-10"></div>
                </header>
                <div class="flex-1 px-6 pt-8 animate-fade-in-up">
                    <div class="w-16 h-16 bg-accent-gold rounded-full flex items-center justify-center mb-6">
                        <span class="material-symbols-outlined text-[32px] text-white">badge</span>
                    </div>
                    <h2 class="brand-title text-3xl italic mb-2">Join as Organizer</h2>
                    <p class="text-gray-500 text-sm mb-8">Help clients transform their wardrobes.</p>

                    <form id="organizer-signup-form" class="space-y-4">
                        ${Components.inputField({ type: 'text', name: 'name', placeholder: 'Full name', icon: 'person' })}
                        ${Components.inputField({ type: 'email', name: 'email', placeholder: 'Email address', icon: 'mail' })}
                        ${Components.inputField({ type: 'password', name: 'password', placeholder: 'Password (min 6 characters)', icon: 'lock' })}
                        ${Components.inputField({ type: 'text', name: 'specialty', placeholder: 'Your specialty (e.g. Minimalist Wardrobes)', icon: 'workspace_premium' })}

                        <button type="submit" class="w-full bg-black text-white py-4 text-[11px] font-bold uppercase tracking-[0.2em] mt-4 active:scale-[0.98] transition-transform">
                            Create Organizer Account
                        </button>
                    </form>

                    <p class="text-center mt-8 text-sm text-gray-500">
                        Looking for client account? <button onclick="Router.navigate('/signup')" class="text-black font-medium">Sign Up Here</button>
                    </p>
                </div>
            </div>
        `;

        document.getElementById('organizer-signup-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const form = e.target;
            const name = form.name.value;
            const email = form.email.value;
            const password = form.password.value;
            const specialty = form.specialty.value;

            if (App.signup(name, email, password, 'organizer')) {
                // Update specialty
                if (App.state.user) {
                    App.state.user.specialty = specialty;
                    Storage.save(Storage.keys.USER, App.state.user);
                }
                Router.navigate('/organizer');
            }
        });
    },

    organizer() {
        const user = App.state.user || {};
        const clients = (user.connectedClients || []);

        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white pb-24">
                <header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md pt-12 pb-4 px-6 border-b border-gray-50">
                    <div class="flex items-center justify-between">
                        <button onclick="Screens.showMenu()" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">menu</span></button>
                        <div class="text-center">
                            <h1 class="brand-logo text-2xl font-medium">Organizerr</h1>
                            <p class="text-[10px] uppercase tracking-[0.3em] text-accent-gold">Pro Dashboard</p>
                        </div>
                        <div class="w-10"></div>
                    </div>
                </header>
                <main class="flex-1 overflow-y-auto px-6 pt-6">
                    <!-- Welcome Card -->
                    <div class="bg-black text-white p-6 mb-8 animate-fade-in">
                        <p class="text-[10px] uppercase tracking-[0.3em] text-gray-400 mb-2">Welcome Back</p>
                        <h2 class="brand-title text-2xl italic mb-2">${user.name || 'Organizer'}</h2>
                        <p class="text-sm text-gray-400">${user.specialty || 'Professional Organizer'}</p>
                    </div>

                    <!-- Stats -->
                    <div class="grid grid-cols-3 gap-4 mb-8 animate-fade-in-up" style="animation-delay: 0.1s">
                        <div class="bg-soft-gray p-4 text-center">
                            <p class="text-2xl font-bold">${clients.length}</p>
                            <p class="text-[10px] uppercase tracking-wider text-gray-400">Clients</p>
                        </div>
                        <div class="bg-soft-gray p-4 text-center">
                            <p class="text-2xl font-bold">${App.getOrganizerVisits().filter(v => v.status === 'scheduled').length}</p>
                            <p class="text-[10px] uppercase tracking-wider text-gray-400">Upcoming</p>
                        </div>
                        <div class="bg-soft-gray p-4 text-center">
                            <p class="text-2xl font-bold">${App.getOrganizerVisits().filter(v => v.status === 'completed').length}</p>
                            <p class="text-[10px] uppercase tracking-wider text-gray-400">Completed</p>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="mb-8 animate-fade-in-up" style="animation-delay: 0.15s">
                        <h3 class="text-[10px] uppercase tracking-[0.2em] text-gray-400 mb-4">Quick Actions</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <button onclick="Router.navigate('/organizer/clients')" class="bg-soft-gray p-6 flex flex-col items-center justify-center gap-3 hover:bg-gray-100 transition-colors">
                                <span class="material-symbols-outlined text-[28px]">group</span>
                                <span class="text-[11px] font-bold uppercase tracking-wider">My Clients</span>
                            </button>
                            <button onclick="Router.navigate('/organizer/schedule')" class="bg-soft-gray p-6 flex flex-col items-center justify-center gap-3 hover:bg-gray-100 transition-colors">
                                <span class="material-symbols-outlined text-[28px]">calendar_month</span>
                                <span class="text-[11px] font-bold uppercase tracking-wider">Schedule</span>
                            </button>
                        </div>
                    </div>

                    <!-- Add Client -->
                    <div class="bg-soft-gray p-6 animate-fade-in-up" style="animation-delay: 0.2s">
                        <h3 class="text-[10px] uppercase tracking-[0.2em] text-gray-400 mb-4">Add Client by Code</h3>
                        <div class="flex gap-3">
                            <input type="text" id="client-code-input" placeholder="Enter client code" class="flex-1 px-4 py-3 bg-white border border-gray-200 text-sm focus:border-black focus:outline-none transition-colors">
                            <button onclick="const code = document.getElementById('client-code-input').value; if(App.addClientByCode(code)) { Screens.organizer(); }" class="px-6 bg-black text-white text-[11px] font-bold uppercase tracking-wider">
                                Add
                            </button>
                        </div>
                    </div>
                </main>
                ${Components.organizerNav('dashboard')}
            </div>
        `;
    },

    organizerClients() {
        const user = App.state.user || {};
        const clientIds = user.connectedClients || [];

        // For demo, create mock client data
        const clients = clientIds.map((id, i) => ({
            id,
            name: `Client ${i + 1}`,
            initials: `C${i + 1}`,
            email: `client${i + 1}@example.com`,
            tier: ['essential', 'premium', 'elite'][i % 3],
            itemCount: Math.floor(Math.random() * 50) + 10
        }));

        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white pb-24">
                <header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md pt-12 pb-4 px-6 border-b border-gray-50">
                    <div class="flex items-center justify-between">
                        <button onclick="Router.navigate('/organizer')" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">arrow_back</span></button>
                        <div class="text-center">
                            <h1 class="brand-logo text-2xl font-medium">Organizerr</h1>
                            <p class="text-[10px] uppercase tracking-[0.3em] text-gray-400">My Clients</p>
                        </div>
                        <div class="w-10"></div>
                    </div>
                </header>
                <main class="flex-1 overflow-y-auto px-6 pt-6">
                    ${clients.length === 0 ? `
                        <div class="text-center py-12 animate-fade-in">
                            <div class="w-20 h-20 bg-soft-gray rounded-full flex items-center justify-center mx-auto mb-6">
                                <span class="material-symbols-outlined text-[40px] text-gray-400">group</span>
                            </div>
                            <h2 class="brand-title text-2xl italic mb-2">No Clients Yet</h2>
                            <p class="text-sm text-gray-500 mb-6">Add clients using their invite code from the dashboard.</p>
                            <button onclick="Router.navigate('/organizer')" class="bg-black text-white px-8 py-4 text-[11px] font-bold uppercase tracking-[0.2em]">
                                Go to Dashboard
                            </button>
                        </div>
                    ` : `
                        <div class="space-y-4">
                            ${clients.map((client, i) => `
                                <div class="bg-soft-gray p-4 animate-fade-in-up" style="animation-delay: ${i * 0.08}s">
                                    <div class="flex items-center gap-4 mb-4">
                                        <div class="w-12 h-12 bg-black text-white rounded-full flex items-center justify-center flex-shrink-0">
                                            <span class="text-sm font-medium">${client.initials}</span>
                                        </div>
                                        <div class="flex-1">
                                            <p class="font-medium text-sm">${client.name}</p>
                                            <p class="text-xs text-gray-500">${client.email}</p>
                                        </div>
                                        <span class="px-2 py-1 ${client.tier === 'elite' ? 'bg-accent-gold text-white' : client.tier === 'premium' ? 'bg-black text-white' : 'bg-gray-200 text-gray-600'} text-[9px] uppercase tracking-wider">
                                            ${client.tier}
                                        </span>
                                    </div>
                                    <div class="flex items-center justify-between text-sm mb-4">
                                        <span class="text-gray-500">${client.itemCount} items in closet</span>
                                    </div>
                                    <div class="flex gap-3">
                                        <button onclick="Router.navigate('/organizer/client/${client.id}')" class="flex-1 py-3 border border-black text-[11px] font-bold uppercase tracking-wider hover:bg-black hover:text-white transition-all">
                                            View Closet
                                        </button>
                                        <button onclick="Router.navigate('/organizer/client/${client.id}/add')" class="flex-1 py-3 bg-black text-white text-[11px] font-bold uppercase tracking-wider">
                                            Add Items
                                        </button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    `}
                </main>
                ${Components.organizerNav('clients')}
            </div>
        `;
    },

    organizerClientCloset(clientId) {
        // For demo, show a sample closet view
        const items = App.state.closetItems.slice(0, 6); // Use existing closet items as demo

        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white pb-24">
                <header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md pt-12 pb-4 px-6 border-b border-gray-50">
                    <div class="flex items-center justify-between">
                        <button onclick="Router.navigate('/organizer/clients')" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">arrow_back</span></button>
                        <div class="text-center">
                            <h1 class="brand-logo text-2xl font-medium">Organizerr</h1>
                            <p class="text-[10px] uppercase tracking-[0.3em] text-gray-400">Client Closet</p>
                        </div>
                        <button onclick="Router.navigate('/organizer/client/${clientId}/add')" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">add</span></button>
                    </div>
                </header>
                <main class="flex-1 overflow-y-auto p-6">
                    ${items.length > 0 ? `
                        <p class="text-xs text-gray-400 mb-4">${items.length} items</p>
                        <div class="grid grid-cols-2 gap-4">
                            ${items.map(item => `
                                <div class="group">
                                    <div class="relative aspect-square bg-gray-100 overflow-hidden mb-3">
                                        ${item.image ? `<img src="${item.image}" alt="${item.name}" class="w-full h-full object-cover">` : `
                                            <div class="w-full h-full flex items-center justify-center">
                                                <span class="material-symbols-outlined text-[48px] text-gray-300">checkroom</span>
                                            </div>
                                        `}
                                    </div>
                                    <p class="text-[10px] text-gray-400 uppercase tracking-wider">${item.brand || item.category}</p>
                                    <p class="text-sm font-medium truncate">${item.name}</p>
                                </div>
                            `).join('')}
                        </div>
                    ` : `
                        <div class="text-center py-12">
                            <div class="w-20 h-20 bg-soft-gray rounded-full flex items-center justify-center mx-auto mb-6">
                                <span class="material-symbols-outlined text-[40px] text-gray-400">checkroom</span>
                            </div>
                            <h3 class="brand-title text-xl italic mb-2">Closet is Empty</h3>
                            <p class="text-sm text-gray-500 mb-6">Start adding items to this client's closet.</p>
                            <button onclick="Router.navigate('/organizer/client/${clientId}/add')" class="bg-black text-white px-8 py-4 text-[11px] font-bold uppercase tracking-[0.2em]">
                                Add Items
                            </button>
                        </div>
                    `}
                </main>
                ${Components.organizerNav('clients')}
            </div>
        `;
    },

    organizerAddItem(clientId) {
        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white pb-24">
                <header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md pt-12 pb-4 px-6 border-b border-gray-50">
                    <div class="flex items-center justify-between">
                        <button onclick="Router.navigate('/organizer/client/${clientId}')" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">arrow_back</span></button>
                        <div class="text-center">
                            <h1 class="brand-logo text-2xl font-medium">Organizerr</h1>
                            <p class="text-[10px] uppercase tracking-[0.3em] text-gray-400">Add Item</p>
                        </div>
                        <div class="w-10"></div>
                    </div>
                </header>
                <main class="flex-1 overflow-y-auto px-6 pt-6">
                    <form id="add-item-form" class="space-y-6">
                        <!-- Photo Upload -->
                        <div class="animate-fade-in">
                            <label class="block mb-2 text-[10px] uppercase tracking-[0.2em] text-gray-400">Photo</label>
                            <div class="relative aspect-square bg-soft-gray flex flex-col items-center justify-center cursor-pointer hover:bg-gray-100 transition-colors" onclick="document.getElementById('item-photo').click()">
                                <span class="material-symbols-outlined text-[48px] text-gray-400 mb-2">add_a_photo</span>
                                <span class="text-sm text-gray-500">Tap to add photo</span>
                                <input type="file" id="item-photo" accept="image/*" class="hidden" onchange="Screens.previewItemPhoto(this)">
                            </div>
                            <div id="photo-preview" class="hidden aspect-square bg-gray-100 mt-4 overflow-hidden">
                                <img id="preview-img" class="w-full h-full object-cover">
                            </div>
                        </div>

                        <!-- Item Details -->
                        <div class="space-y-4 animate-fade-in-up" style="animation-delay: 0.1s">
                            ${Components.inputField({ type: 'text', name: 'itemName', placeholder: 'Item name', icon: 'checkroom' })}
                            ${Components.inputField({ type: 'text', name: 'brand', placeholder: 'Brand (optional)', icon: 'sell' })}

                            <div>
                                <label class="block mb-2 text-[10px] uppercase tracking-[0.2em] text-gray-400">Category</label>
                                <select name="category" class="w-full px-4 py-4 bg-soft-gray border-0 text-sm focus:ring-2 focus:ring-black transition-all">
                                    ${App.data.categories.filter(c => c !== 'All Items').map(c => `<option value="${c}">${c}</option>`).join('')}
                                </select>
                            </div>

                            ${Components.inputField({ type: 'text', name: 'color', placeholder: 'Color', icon: 'palette' })}
                            ${Components.inputField({ type: 'text', name: 'material', placeholder: 'Material (optional)', icon: 'texture' })}
                        </div>

                        <button type="submit" class="w-full bg-black text-white py-4 text-[11px] font-bold uppercase tracking-[0.2em] active:scale-[0.98] transition-transform">
                            Add to Client's Closet
                        </button>
                    </form>
                </main>
                ${Components.organizerNav('clients')}
            </div>
        `;

        document.getElementById('add-item-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const form = e.target;
            const item = {
                name: form.itemName.value,
                brand: form.brand.value,
                category: form.category.value,
                color: form.color.value,
                material: form.material.value,
                image: document.getElementById('preview-img').src || null
            };

            if (!item.name) {
                Toast.show('Please enter item name', 'error');
                return;
            }

            // Add to client's closet (for demo, adding to current user's closet)
            App.addItemToClientCloset(clientId, item);
            Toast.show('Item added to client closet!', 'success');
            Router.navigate('/organizer/client/' + clientId);
        });
    },

    previewItemPhoto(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = (e) => {
                document.getElementById('preview-img').src = e.target.result;
                document.getElementById('photo-preview').classList.remove('hidden');
            };
            reader.readAsDataURL(input.files[0]);
        }
    },

    organizerSchedule() {
        const visits = App.getOrganizerVisits();
        const upcoming = visits.filter(v => v.status === 'scheduled');
        const past = visits.filter(v => v.status === 'completed');

        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white pb-24">
                <header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md pt-12 pb-4 px-6 border-b border-gray-50">
                    <div class="flex items-center justify-between">
                        <button onclick="Router.navigate('/organizer')" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">arrow_back</span></button>
                        <div class="text-center">
                            <h1 class="brand-logo text-2xl font-medium">Organizerr</h1>
                            <p class="text-[10px] uppercase tracking-[0.3em] text-gray-400">My Schedule</p>
                        </div>
                        <div class="w-10"></div>
                    </div>
                </header>
                <main class="flex-1 overflow-y-auto px-6 pt-6">
                    ${visits.length === 0 ? `
                        <div class="text-center py-12 animate-fade-in">
                            <div class="w-20 h-20 bg-soft-gray rounded-full flex items-center justify-center mx-auto mb-6">
                                <span class="material-symbols-outlined text-[40px] text-gray-400">calendar_month</span>
                            </div>
                            <h2 class="brand-title text-2xl italic mb-2">No Visits Scheduled</h2>
                            <p class="text-sm text-gray-500">Your schedule will appear here when clients book visits.</p>
                        </div>
                    ` : `
                        ${upcoming.length > 0 ? `
                            <div class="mb-8 animate-fade-in">
                                <h3 class="text-[10px] uppercase tracking-[0.2em] text-gray-400 mb-4">Upcoming Visits</h3>
                                <div class="space-y-4">
                                    ${upcoming.map(visit => {
                                        const date = new Date(visit.scheduledDate);
                                        return `
                                            <div class="bg-soft-gray p-4">
                                                <div class="flex items-start gap-4 mb-4">
                                                    <div class="w-12 h-12 bg-black text-white rounded-full flex items-center justify-center flex-shrink-0">
                                                        <span class="text-sm font-medium">C</span>
                                                    </div>
                                                    <div class="flex-1">
                                                        <p class="font-medium text-sm">Client Visit</p>
                                                        <p class="text-xs text-gray-500">${visit.clientId}</p>
                                                    </div>
                                                    <span class="px-2 py-1 bg-green-100 text-green-700 text-[10px] uppercase tracking-wider font-medium">Scheduled</span>
                                                </div>
                                                <div class="flex items-center gap-4 text-sm mb-4">
                                                    <div class="flex items-center gap-2">
                                                        <span class="material-symbols-outlined text-[18px] text-gray-400">calendar_today</span>
                                                        <span>${date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' })}</span>
                                                    </div>
                                                    <div class="flex items-center gap-2">
                                                        <span class="material-symbols-outlined text-[18px] text-gray-400">schedule</span>
                                                        <span>${visit.time || '10:00 AM'}</span>
                                                    </div>
                                                </div>
                                                <button onclick="Toast.show('Visit marked as complete', 'success')" class="w-full py-3 border border-black text-[11px] font-bold uppercase tracking-wider hover:bg-black hover:text-white transition-all">
                                                    Mark Complete
                                                </button>
                                            </div>
                                        `;
                                    }).join('')}
                                </div>
                            </div>
                        ` : ''}

                        ${past.length > 0 ? `
                            <div class="animate-fade-in-up" style="animation-delay: 0.1s">
                                <h3 class="text-[10px] uppercase tracking-[0.2em] text-gray-400 mb-4">Completed</h3>
                                <div class="space-y-4">
                                    ${past.map(visit => {
                                        const date = new Date(visit.scheduledDate);
                                        return `
                                            <div class="bg-soft-gray p-4 opacity-70">
                                                <div class="flex items-center gap-4">
                                                    <div class="w-10 h-10 bg-gray-400 text-white rounded-full flex items-center justify-center flex-shrink-0">
                                                        <span class="text-xs font-medium">C</span>
                                                    </div>
                                                    <div class="flex-1">
                                                        <p class="font-medium text-sm">Client Visit</p>
                                                        <p class="text-xs text-gray-500">${date.toLocaleDateString()}</p>
                                                    </div>
                                                    <span class="px-2 py-1 bg-gray-200 text-gray-600 text-[10px] uppercase tracking-wider font-medium">Completed</span>
                                                </div>
                                            </div>
                                        `;
                                    }).join('')}
                                </div>
                            </div>
                        ` : ''}
                    `}
                </main>
                ${Components.organizerNav('schedule')}
            </div>
        `;
    },

    organizerProfile() {
        const user = App.state.user || {};

        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white pb-24">
                <header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md pt-12 pb-4 px-6 border-b border-gray-50">
                    <div class="flex items-center justify-between">
                        <button onclick="Router.navigate('/organizer')" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">arrow_back</span></button>
                        <div class="text-center">
                            <h1 class="brand-logo text-2xl font-medium">Organizerr</h1>
                            <p class="text-[10px] uppercase tracking-[0.3em] text-gray-400">Profile</p>
                        </div>
                        <div class="w-10"></div>
                    </div>
                </header>
                <main class="flex-1 overflow-y-auto px-6 pt-6">
                    <div class="text-center mb-8 animate-fade-in">
                        <div class="w-24 h-24 bg-accent-gold text-white rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-3xl font-medium">${user.initials || 'OR'}</span>
                        </div>
                        <h2 class="brand-title text-2xl italic mb-1">${user.name || 'Organizer'}</h2>
                        <p class="text-sm text-gray-500">${user.specialty || 'Professional Organizer'}</p>
                        <div class="flex items-center justify-center gap-4 mt-4">
                            <div class="flex items-center gap-1">
                                <span class="material-symbols-outlined text-accent-gold text-[16px]">star</span>
                                <span class="text-sm font-medium">4.9</span>
                            </div>
                            <span class="text-gray-300">â€¢</span>
                            <span class="text-sm text-gray-500">${(user.connectedClients || []).length} clients</span>
                        </div>
                    </div>

                    <div class="space-y-4 animate-fade-in-up" style="animation-delay: 0.1s">
                        <button class="w-full bg-soft-gray p-4 flex items-center gap-4 hover:bg-gray-100 transition-colors">
                            <span class="material-symbols-outlined text-gray-600">edit</span>
                            <span class="text-sm font-medium">Edit Profile</span>
                            <span class="material-symbols-outlined ml-auto text-gray-400">chevron_right</span>
                        </button>
                        <button class="w-full bg-soft-gray p-4 flex items-center gap-4 hover:bg-gray-100 transition-colors">
                            <span class="material-symbols-outlined text-gray-600">notifications</span>
                            <span class="text-sm font-medium">Notifications</span>
                            <span class="material-symbols-outlined ml-auto text-gray-400">chevron_right</span>
                        </button>
                        <button class="w-full bg-soft-gray p-4 flex items-center gap-4 hover:bg-gray-100 transition-colors">
                            <span class="material-symbols-outlined text-gray-600">help</span>
                            <span class="text-sm font-medium">Help & Support</span>
                            <span class="material-symbols-outlined ml-auto text-gray-400">chevron_right</span>
                        </button>
                        <button onclick="App.logout(); Router.navigate('/welcome');" class="w-full bg-soft-gray p-4 flex items-center gap-4 hover:bg-red-50 transition-colors text-red-500">
                            <span class="material-symbols-outlined">logout</span>
                            <span class="text-sm font-medium">Sign Out</span>
                        </button>
                    </div>
                </main>
                ${Components.organizerNav('profile')}
            </div>
        `;
    },

    // ============ TRANSFORM SERVICE SCREEN ============
    transform() {
        const user = App.state.user || {};
        const currentTier = user.subscription?.tier || 'free';
        const tiers = App.data.subscriptionTiers.filter(t => t.id !== 'free');

        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white">
                <header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md pt-12 pb-4 px-6 border-b border-gray-50">
                    <div class="flex items-center justify-between">
                        <button onclick="history.back()" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">arrow_back</span></button>
                        <div class="text-center">
                            <h1 class="brand-logo text-2xl font-medium">Stylistt</h1>
                            <p class="text-[10px] uppercase tracking-[0.3em] text-accent-gold">Transform</p>
                        </div>
                        <div class="w-10"></div>
                    </div>
                </header>
                <main class="flex-1 overflow-y-auto">
                    <!-- Hero Section -->
                    <div class="px-6 py-8 text-center animate-fade-in">
                        <div class="w-20 h-20 bg-accent-gold rounded-full flex items-center justify-center mx-auto mb-6">
                            <span class="material-symbols-outlined text-[40px] text-white">storefront</span>
                        </div>
                        <h2 class="brand-title text-3xl italic mb-3">Turn Your Closet Into<br>a Premium Boutique</h2>
                        <p class="text-sm text-gray-500 max-w-[300px] mx-auto">A professional stylist transforms your physical closet AND digitizes your entire wardrobe.</p>
                    </div>

                    <!-- What You Get -->
                    <div class="px-6 py-6 bg-soft-gray animate-fade-in-up" style="animation-delay: 0.1s">
                        <h3 class="text-[10px] uppercase tracking-[0.2em] text-gray-400 mb-4">What You Get</h3>
                        <div class="space-y-4">
                            <div class="flex items-start gap-4">
                                <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center flex-shrink-0">
                                    <span class="material-symbols-outlined text-accent-gold">home</span>
                                </div>
                                <div>
                                    <p class="font-medium text-sm">In-Home Visit</p>
                                    <p class="text-xs text-gray-500">A professional comes to you - no effort required</p>
                                </div>
                            </div>
                            <div class="flex items-start gap-4">
                                <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center flex-shrink-0">
                                    <span class="material-symbols-outlined text-accent-gold">checkroom</span>
                                </div>
                                <div>
                                    <p class="font-medium text-sm">Physical Organization</p>
                                    <p class="text-xs text-gray-500">Your closet organized like a luxury boutique</p>
                                </div>
                            </div>
                            <div class="flex items-start gap-4">
                                <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center flex-shrink-0">
                                    <span class="material-symbols-outlined text-accent-gold">photo_camera</span>
                                </div>
                                <div>
                                    <p class="font-medium text-sm">Full Digital Scan</p>
                                    <p class="text-xs text-gray-500">Every piece photographed and cataloged</p>
                                </div>
                            </div>
                            <div class="flex items-start gap-4">
                                <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center flex-shrink-0">
                                    <span class="material-symbols-outlined text-accent-gold">auto_awesome</span>
                                </div>
                                <div>
                                    <p class="font-medium text-sm">Unlimited AI Styling</p>
                                    <p class="text-xs text-gray-500">Daily outfits from YOUR actual wardrobe</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pricing Tiers -->
                    <div class="px-6 py-8">
                        <h3 class="text-[10px] uppercase tracking-[0.2em] text-gray-400 mb-6 text-center">Choose Your Plan</h3>
                        <div class="space-y-4">
                            ${tiers.map((tier, i) => `
                                <div class="animate-fade-in-up" style="animation-delay: ${0.2 + i * 0.1}s">
                                    <div class="border-2 ${tier.popular ? 'border-black' : 'border-gray-200'} p-6 relative">
                                        ${tier.popular ? '<div class="absolute -top-3 left-1/2 -translate-x-1/2 bg-black text-white px-4 py-1 text-[10px] uppercase tracking-wider">Most Popular</div>' : ''}
                                        <div class="flex justify-between items-start mb-4">
                                            <div>
                                                <h4 class="brand-title text-xl font-medium">${tier.name}</h4>
                                                <p class="text-2xl font-light">${tier.priceLabel}</p>
                                            </div>
                                            <div class="text-right">
                                                <span class="text-[10px] uppercase tracking-wider text-gray-400">${tier.visits} visit${tier.visits > 1 ? 's' : ''}</span>
                                            </div>
                                        </div>
                                        <ul class="space-y-2 mb-6">
                                            ${tier.features.map(f => `
                                                <li class="flex items-center gap-2 text-sm">
                                                    <span class="material-symbols-outlined text-[16px] text-accent-gold">check</span>
                                                    ${f}
                                                </li>
                                            `).join('')}
                                        </ul>
                                        <button onclick="App.subscribe('${tier.id}'); Toast.show('Subscription activated!', 'success'); Router.navigate('/book-visit');" class="w-full ${tier.popular ? 'bg-black text-white' : 'border border-black'} py-4 text-[11px] font-bold uppercase tracking-[0.2em] hover:bg-black hover:text-white transition-all">
                                            ${currentTier === tier.id ? 'Current Plan' : 'Get Started'}
                                        </button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Trust Badge -->
                    <div class="px-6 pb-8">
                        <div class="bg-soft-gray p-6 text-center">
                            <div class="flex justify-center gap-1 mb-2">
                                ${[1,2,3,4,5].map(() => '<span class="material-symbols-outlined text-accent-gold text-[16px]">star</span>').join('')}
                            </div>
                            <p class="text-sm font-medium mb-1">4.9 average rating</p>
                            <p class="text-xs text-gray-500">Trusted by 2,400+ clients</p>
                        </div>
                    </div>
                </main>
            </div>
        `;
    },

    bookVisit() {
        const organizers = App.data.mockOrganizers || [];
        const dates = [];
        for (let i = 1; i <= 14; i++) {
            const d = new Date();
            d.setDate(d.getDate() + i);
            dates.push(d);
        }

        document.getElementById('screen-container').innerHTML = `
            <div class="flex flex-col min-h-screen bg-white">
                <header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md pt-12 pb-4 px-6 border-b border-gray-50">
                    <div class="flex items-center justify-between">
                        <button onclick="history.back()" class="active:scale-90 transition-transform"><span class="material-symbols-outlined">arrow_back</span></button>
                        <div class="text-center">
                            <h1 class="brand-logo text-2xl font-medium">Stylistt</h1>
                            <p class="text-[10px] uppercase tracking-[0.3em] text-gray-400">Book Your Visit</p>
                        </div>
                        <div class="w-10"></div>
                    </div>
                </header>
                <main class="flex-1 overflow-y-auto px-6 pt-6 pb-32">
                    <!-- Select Organizer -->
                    <div class="mb-8 animate-fade-in">
                        <h3 class="text-[10px] uppercase tracking-[0.2em] text-gray-400 mb-4">Choose Your Stylist</h3>
                        <div class="space-y-3">
                            ${organizers.map((org, i) => `
                                <label class="block cursor-pointer">
                                    <input type="radio" name="organizer" value="${org.id}" class="hidden peer" ${i === 0 ? 'checked' : ''}>
                                    <div class="bg-soft-gray p-4 flex items-center gap-4 border-2 border-transparent peer-checked:border-black transition-all">
                                        <div class="w-12 h-12 bg-black text-white rounded-full flex items-center justify-center flex-shrink-0">
                                            <span class="text-sm font-medium">${org.initials}</span>
                                        </div>
                                        <div class="flex-1">
                                            <p class="font-medium text-sm">${org.name}</p>
                                            <p class="text-xs text-gray-500">${org.specialty}</p>
                                        </div>
                                        <div class="text-right">
                                            <div class="flex items-center gap-1">
                                                <span class="material-symbols-outlined text-accent-gold text-[16px]">star</span>
                                                <span class="text-sm font-medium">${org.rating}</span>
                                            </div>
                                        </div>
                                    </div>
                                </label>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Select Date -->
                    <div class="mb-8 animate-fade-in-up" style="animation-delay: 0.1s">
                        <h3 class="text-[10px] uppercase tracking-[0.2em] text-gray-400 mb-4">Select Date</h3>
                        <div class="flex gap-3 overflow-x-auto pb-4">
                            ${dates.slice(0, 7).map((d, i) => `
                                <label class="cursor-pointer flex-shrink-0">
                                    <input type="radio" name="date" value="${d.toISOString()}" class="hidden peer" ${i === 0 ? 'checked' : ''}>
                                    <div class="w-16 py-4 bg-soft-gray text-center border-2 border-transparent peer-checked:border-black peer-checked:bg-black peer-checked:text-white transition-all">
                                        <p class="text-[10px] uppercase">${d.toLocaleDateString('en-US', { weekday: 'short' })}</p>
                                        <p class="text-xl font-bold">${d.getDate()}</p>
                                    </div>
                                </label>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Select Time -->
                    <div class="mb-8 animate-fade-in-up" style="animation-delay: 0.15s">
                        <h3 class="text-[10px] uppercase tracking-[0.2em] text-gray-400 mb-4">Select Time</h3>
                        <div class="grid grid-cols-3 gap-3">
                            ${['9:00 AM', '10:00 AM', '11:00 AM', '1:00 PM', '2:00 PM', '3:00 PM'].map((time, i) => `
                                <label class="cursor-pointer">
                                    <input type="radio" name="time" value="${time}" class="hidden peer" ${i === 0 ? 'checked' : ''}>
                                    <div class="py-3 bg-soft-gray text-center text-sm border-2 border-transparent peer-checked:border-black peer-checked:bg-black peer-checked:text-white transition-all">
                                        ${time}
                                    </div>
                                </label>
                            `).join('')}
                        </div>
                    </div>
                </main>

                <!-- Fixed Bottom CTA -->
                <div class="fixed bottom-0 left-0 right-0 max-w-[430px] mx-auto bg-white/95 backdrop-blur-sm border-t border-gray-100 p-6 z-50">
                    <button onclick="Screens.confirmTransformBooking()" class="w-full bg-black text-white py-4 text-[11px] font-bold uppercase tracking-[0.2em] active:scale-[0.98] transition-transform">
                        Confirm Booking
                    </button>
                </div>
            </div>
        `;
    },

    confirmTransformBooking() {
        const organizer = document.querySelector('input[name="organizer"]:checked')?.value;
        const date = document.querySelector('input[name="date"]:checked')?.value;
        const time = document.querySelector('input[name="time"]:checked')?.value;

        if (organizer && date && time) {
            App.bookVisit(organizer, date, time);
            Toast.show('Visit booked! We\'ll transform your closet.', 'success');
            Router.navigate('/profile');
        } else {
            Toast.show('Please select all options', 'error');
        }
    }
};

// ============ REGISTER ROUTES ============
Router.register('/welcome', Screens.welcome);
Router.register('/login', Screens.login);
Router.register('/signup', Screens.signup);
Router.register('/forgot-password', Screens.forgotPassword);
Router.register('/style-dna', Screens.styleDNA);
Router.register('/get-started', Screens.getStarted);
Router.register('/daily-edit', Screens.dailyEdit);
Router.register('/lookbooks', Screens.lookbooks);
Router.register('/closet', Screens.closet);
Router.register('/ai-outfit', Screens.aiOutfit);
Router.register('/scan', Screens.scan);
Router.register('/scan/results', Screens.scanResults);
Router.register('/insights', Screens.insights);
Router.register('/profile', Screens.profile);
Router.register('/shop', Screens.shop);
Router.register('/lookbook/:id', Screens.lookbookDetail);
Router.register('/settings', Screens.settings);
Router.register('/notifications', Screens.notifications);
Router.register('/edit-profile', Screens.editProfile);
Router.register('/favorites', Screens.favorites);
Router.register('/sustainability', Screens.sustainability);
Router.register('/item/:id', Screens.itemDetail);

// Closet Transformation Routes
Router.register('/transform', Screens.transform);
Router.register('/book-visit', Screens.bookVisit);

// Organizer Routes (for professionals)
Router.register('/organizer-signup', Screens.organizerSignup);
Router.register('/organizer', Screens.organizer);
Router.register('/organizer/clients', Screens.organizerClients);
Router.register('/organizer/client/:id', (params) => Screens.organizerClientCloset(params.id));
Router.register('/organizer/client/:id/add', (params) => Screens.organizerAddItem(params.id));
Router.register('/organizer/schedule', Screens.organizerSchedule);
Router.register('/organizer/profile', Screens.organizerProfile);

// ============ INIT ============
App.init();
Router.init();
</script>
</body>
</html>
